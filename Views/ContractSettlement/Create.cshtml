@model RentCar.Models.CR_Cas_Contract_Basic

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutSys3.cshtml";
}


<style>
    .tab_reglement {
        height: 50px !important;
    }

    .row {
        min-height: 38px;
    }

    .last_tab .row {
        min-height: 36px;
    }

    #textErr {
        margin-top: -1px;
    }

    .btn-secondary {
        background-color: #4A80B4 !important;
        border-color: #4A80B4 !important;
    }

        .btn-secondary:hover {
            background-color: #EDA63C !important;
            border-color: #EDA63C !important;
        }

    .table {
        margin-left: auto;
        margin-right: auto;
    }

    .input_td {
        padding: 0 !important;
    }

        .input_td input {
            width: 100%;
            border: 0;
            height: 35px;
            outline: none;
        }

    .textErr1 {
        float: right;
        text-align: right;
        height: 10px;
        color: red;
        font-weight: bold;
        width: 100%;
    }
</style>
<style>
    input {
        height: 28px !important;
    }

    #date_btn1, #date_btn2, #date_btn3 {
        font-size: 0 !important;
        background: url('../../BSys3Styles/Images/icone_calendre.png') center 3px no-repeat;
        width: 30px;
        border: none;
        border-left: 0;
        height: 26px;
        position: absolute;
        left: 10px;
        margin-top: -30px;
    }

    .textt {
        font-family: Arial;
    }

    .btn-secondary {
        background-color: #EDA63C !important;
        border-color: #EDA63C !important;
    }

        .btn-secondary:hover {
            background-color: #4A80B4 !important;
            border-color: #4A80B4 !important;
        }

    .row {
        display: flex;
        align-items: center;
    }

    label {
        font-weight: 600;
        font-size: 13px !important;
    }

    input {
        font-weight: 700;
        font-size: 14px !important;
    }
</style>
<!-- HTML -->
<!--tabs amir end-->
<form id="ContractForm" class="form-horizontal" action="/ContractSettlement/Create" enctype="multipart/form-data" method="post" data-parsley-validate="" novalidate="">
    @Html.AntiForgeryToken()
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="card" style="height:100%">
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Start_Date)
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Expected_Rental_Days)
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Free_Additional_Hours)
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Hour_Max)
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Daily_Free_KM)
                    @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Choices_Value)


                    <fieldset class="card-body" style="padding-bottom:0px;padding-top:0px;border:none;">

                        <center><h3 class="header-title" style="color:#4A80B4;font-size:30px;"> تسوية عقد</h3></center>
                        <div id="regForm">
                            <div style="min-height:70%">

                                <div class="tab" id="accountForm">
                                    <div>

                                        <!-- Circles which indicates the steps of the form: -->
                                        <div class="row tab_width_reglement">
                                            <div class="tab_reglement first" id="firstli" style="z-index:5">
                                                <span class="step active"> بنود التأجير</span>
                                            </div>
                                            <div class="tab_reglement" data-target-form="#fourForm" style="z-index:4">
                                                <span class="step"> المصروفات</span>
                                            </div>
                                            <div class="tab_reglement" data-target-form="#threeForm" style="z-index:3">
                                                <span class="step"> التعويضات</span>
                                            </div>
                                            <div class="tab_reglement" data-target-form="#towForm" style="z-index:2">
                                                <span class="step"> الفحص الظاهري</span>
                                            </div>
                                            <div class="tab_reglement last" data-target-form="#oneForm" style="z-index:1">
                                                <span class="step">الدفع</span>
                                            </div>
                                        </div>
                                        <div @*class="textt"*@ style="">
                                            <fieldset class="fildest51">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label for="userName3" style="margin-right: 10px">رقم العقد</label>
                                                            <div>
                                                                <input autocomplete="off" class="form-control " id="ContractNo" name="ContractNo" style="float: right; width: 100%; margin-right: 60px;" type="text" value="@ViewBag.ContractNo" readonly>
                                                                <input type="text" id="OldCurrentKm" value="@ViewBag.OldCurrentKm" hidden />
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">تاريخ التسوية</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="Date" name="Date" style="float:right;width:100%" type="text" value="@ViewBag.Date" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row ">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">الرقم التسلسلي</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="CarSerialNo" name="CarSerialNo" style="float:right;width:100%" type="text" value="@ViewBag.CarSerialNo" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-7 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">اسم السيارة</label>
                                                            <div class="col-md-8">
                                                                <input autocomplete="off" class="form-control " id="CarName" name="CarName" style="float: right; width: 100%; margin-right: -22px;" type="text" value="@ViewBag.CarName" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row ">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">رقم الهوية</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="RenterId" name="RenterId" style="float:right;width:100%" type="text" value="@ViewBag.RenterId" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">اسم المستأجر</label>
                                                            <div class="col-md-8">
                                                                <input autocomplete="off" class="form-control " id="nom_locataire" name="nom_locataire" style="float:right;width:100%" type="text" value="@ViewBag.RenterName" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">بداية العقد</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="ContractStartDate" name="ContractStartDate" style="float:right;width:100%" type="text" value="@ViewBag.ContractStartDate" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">وقت بداية العقد</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="ContractStartTime" name="ContractStartTime" style="float:right;width:100%" type="text" value="@ViewBag.ContractStartTime" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">نهاية العقد</label>
                                                            <div class="col-md-7">
                                                                <input class="form-control text-box single-line" id="ContractEndDate" name="ContractEndDate" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractEndDate" style="width:100%" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-5" for="userName3">وقت نهاية العقد</label>
                                                            <div class="col-md-4">
                                                                <input type="text" class="form-control text-box single-line" id="ContractEndTime" name="ContractEndTime" value="@ViewBag.ContractEndTime" style="width: 100%; margin-right: -15px;" readonly>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-6" for="userName3">عدد الايام المتوقع</label>
                                                            <div class="col-md-4">
                                                                <input type="text" class="form-control text-box single-line" id="ExContractDaysNbr" name="ExContractDaysNbr" value="@ViewBag.ExContractDaysNbr" style="width:100%" readonly>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row mt-1">

                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label style="margin-right: 5px" for="userName3">نهاية العقد الفعلي</label>
                                                            @if (Session["ContractCancel"].ToString() == "True")
                                                            {
                                                                <div>

                                                                    <input class="form-control text-box single-line" id="ContractEndDateEx" name="ContractEndDateEx" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractEndDateEx" style="width: 100%;margin-right: 23px;" onblur="affich_btn_1(event)">
                                                                    <input type="button" class="hijri-date-input2" id="date_btn1" onblur="affich_affich_1(event)" />
                                                                </div>

                                                            }
                                                            else
                                                            {
                                                                <div>
                                                                    <input class="form-control text-box single-line" id="ContractEndDateEx" name="ContractEndDateEx" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractEndDateEx" style="width: 100%;margin-right: 10px;" readonly>
                                                                </div>
                                                                @*<label class="textErr1" style=" margin-right: 140px; font-size: 10px !important;">عفوا ليس لك صلاحية تسوية العقد</label>*@

                                                            }
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-5" for="userName3">وقت نهاية العقد</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="ContractEndTimeEx" name="ContractEndTimeEx" style="float: right; width: 100%; margin-right: -15px;" type="text" value="@ViewBag.ContractEndTimeEx" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        @if (Session["ContractCancel"].ToString() == "True")
                                                        {
                                                            <div class="form-group row mb-3">
                                                                <label class="col-md-6" for="userName3">عدد الأيام الفعلي</label>
                                                                <div class="col-md-4">
                                                                    <input autocomplete="off" class="form-control " id="ContractDaysNbr" name="ContractDaysNbr" style="float: right; width: 100%; margin-right: 5px;" value="" type="text" readonly>
                                                                </div>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="form-group row mb-3">
                                                                <label class="col-md-6" for="userName3">عدد الأيام الفعلي</label>
                                                                <div class="col-md-4">
                                                                    <input autocomplete="off" class="form-control " id="ContractDaysNbr" name="ContractDaysNbr" style="float: right; width: 100%;" type="text" value="@ViewBag.ContractDaysNbr" readonly>

                                                                </div>
                                                            </div>
                                                        }
                                                    </div>
                                                </div>

                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">ساعات مجانية</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="FreeAdditionalHours" name="FreeAdditionalHours" style="float:right;width:100%" type="text" value="@ViewBag.FreeAdditionalHours" readonly>
                                                                @*<input autocomplete="off" class="form-control " id="MaxHours" name="MaxHours" style="float:right;width:100%" type="text" value="@ViewBag.MaxHours" readonly hidden>*@
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">ساعات إضافية</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="AdditionalHours" name="AdditionalHours" style="float: right; width: 100%; direction: ltr; text-align: right; margin-right: 15px;" type="text" value="@ViewBag.AdditionalHours" readonly>
                                                            </div>
                                                        </div>
                                                        <span id="textErr" style="white-space: nowrap; width: 100%; margin-top: -10px;"></span>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12" hidden>
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-6" for="userName3">قيمة الساعة الاضافية</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="ExtraHourValue" name="ExtraHourValue" style="float:right;width:100%" type="text" value="@ViewBag.ExtraHourValue" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-5" for="userName3">قيمة الإيجار اليومي</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="DailyRentValue" name="DailyRentValue" style="float: right; width: 100%; margin-right: -29px;" type="text" value="@ViewBag.DailyRentValue" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-5" for="userName3">تاريخ نهاية التفويض</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="AuthEndDate" name="AuthEndDate" style="float: right; width: 100%; margin-right: -12px; " type="text" value="@ViewBag.AuthEndDate" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12" hidden>
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-6" for="userName3">قيمة الكيلو الإضافي</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="AdditionalKmValue" name="AdditionalKmValue" style="float:right;width:100%" type="text" value="@ViewBag.AdditionalKmValue" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">فرع الإستلام</label>
                                                            <div class="col-md-7">
                                                                <input autocomplete="off" class="form-control " id="BranchReceipt" name="BranchReceipt" style="float:right;width:100%" type="text" value="@ViewBag.BranchReceipt" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">فرع التسليم</label>
                                                            <div class="col-md-4">
                                                                <input autocomplete="off" class="form-control " id="DeliveryBranch" name="DeliveryBranch" style="float:right;width:100%" type="text" value="@ViewBag.DeliveryBranch" readonly>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mt-1">
                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4" for="userName3">المصروفات </label>
                                                            <div class="col-md-2 offset-md-6">
                                                                <input class="form-control" id="Chk_Depences" name="Chk_Depences" style="height:26px !important;margin-top:0px;" type="checkbox" value="true">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-3" for="userName3">التعويضات </label>
                                                            <div class="col-md-2 offset-md-6">
                                                                <input class="form-control" id="Chk_Compensation" name="Chk_Compensation" style="height:26px !important;margin-top:0px;" type="checkbox" value="true">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> <!-- end row -->

                                            </fieldset>
                                        </div>

                                    </div>

                                </div>

                                <div class="tab" id="fourForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width_reglement">
                                        <div class="tab_reglement first" id="firstli" data-target-form="#accountForm" style="z-index:5">
                                            <span class="step "> بنود التأجير</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step active"> المصروفات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#threeForm" style="z-index:3">
                                            <span class="step"> التعويضات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#towForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_reglement last" data-target-form="#oneForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <div class="" style="">
                                        <fieldset class="fildest51">
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="row">
                                                        <label class="col-md-4" for="userName3">قيمة المصروفات</label>
                                                        <div class="col-md-8">
                                                            <input autocomplete="off" class="form-control " id="Depences" name="Depences" style="float:right;width:100%" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-4" for="userName3">بيان المصروفات</label>
                                                        <div class="col-md-8">
                                                            <textarea autocomplete="off" class="form-control " id="DepencesReason" name="DepencesReason" style="float: right; height: 290px; resize: none; width: 100%"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="row">
                                                        <div class="col-md-6" style="float: right; margin-bottom: 10px;">

                                                            <div style="width: 100%; float: left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:30px;width:100%;line-height:10px;"> المرفقات 1</span>
                                                                        <input name="imgx1" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgx1(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgx1" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>

                                                        <div class="col-md-6" style="float: right; margin-bottom: 10px;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width: 100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 2</span>
                                                                        <input name="imgx2" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgx2(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgx2" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>
                                                        <div class="col-md-6" style="float:right;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 3</span>
                                                                        <input name="imgx3" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgx3(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgx3" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />

                                                        </div>

                                                        <div class="col-md-6" style="float:right;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 4</span>
                                                                        <input name="imgx4" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgx4(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgx4" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="tab" id="threeForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width_reglement">
                                        <div class="tab_reglement first" id="firstli" data-target-form="#accountForm" style="z-index:5">
                                            <span class="step "> بنود التأجير</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step"> المصروفات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#threeForm" style="z-index:3">
                                            <span class="step active"> التعويضات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#towForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_reglement last" data-target-form="#oneForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <div class="" style="">
                                        <fieldset class="fildest51">
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="row">
                                                        <label class="col-md-4" for="userName3">التأمين</label>
                                                        <div class="col-md-8">
                                                            <input autocomplete="off" class="form-control " id="InsuranceVal" name="InsuranceVal" style="float:right;width:100%" type="text" value="@ViewBag.InsuranceVal" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-4" for="userName3">قيمة التعويضات</label>
                                                        <div class="col-md-8">
                                                            <input autocomplete="off" class="form-control " id="CompensationVal" name="CompensationVal" style="float:right;width:100%" type="text" value="">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-4" for="userName3">وصف حالة التعويضات</label>
                                                        <div class="col-md-8">
                                                            <textarea autocomplete="off" class="form-control " id="CompensationReason" name="CompensationReason" style="float: right; height: 253px; resize: none; width: 100%"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="row">
                                                        <div class="col-md-6" style="float: right; margin-bottom: 10px;">

                                                            <div style="width: 100%; float: left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:30px;width:100%;line-height:10px;"> المرفقات 1</span>
                                                                        <input name="imgy1" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgy1(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgy1" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>

                                                        <div class="col-md-6" style="float: right; margin-bottom: 10px;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width: 100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 2</span>
                                                                        <input name="imgy2" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgy2(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgy2" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>
                                                        <div class="col-md-6" style="float:right;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 3</span>
                                                                        <input name="imgy3" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgy3(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgy3" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />

                                                        </div>

                                                        <div class="col-md-6" style="float:right;">
                                                            <div style="width:100%;float:left;">
                                                                <div class="input-group">
                                                                    <span class="input-group-btn" style="width:100%">
                                                                        <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width: 100%; height: 30px; width: 100%; line-height: 10px;"> المرفقات 4</span>
                                                                        <input name="imgy4" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImgy4(event)">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <img id="imgy4" class="zoom" style="float: left; width: 100%; height: 130px; object-fit: cover " />
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>

                                </div>
                                <div class="tab" id="towForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width_reglement">
                                        <div class="tab_reglement first" id="firstli" data-target-form="#accountForm" style="z-index:5">
                                            <span class="step "> بنود التأجير</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step"> المصروفات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#threeForm" style="z-index:3">
                                            <span class="step"> التعويضات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#towForm" style="z-index:2">
                                            <span class="step active"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_reglement last" data-target-form="#oneForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <fieldset class="fildest51">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-12" style="margin-top:0px;">


                                                <div id="VirtuelInspection">
                                                    @{
                                                        Html.RenderAction("VirtuelInspection");
                                                    }
                                                </div>


                                            </div>

                                            <div class="col-lg-6 col-md-12" style="float:right;margin-top:-10px">


                                                <div class="row">
                                                    <div class="col-md-12">
                                                        @if (ViewBag.IsOpenKm == "True")
                                                        {
                                                            <div style="color:#4A80B4;font-size:16px;width:100%;text-align:center;margin-top:10px;font-weight:bold"> العداد مفتوح</div>
                                                        }
                                                    </div>
                                                    <div class="col-md-12 ">
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group row mt-2">
                                                                    <label class="col-md-12" for="input3" style="text-align:center">قراءة العداد الحالي </label>
                                                                    <div class="col-md-12">
                                                                        <input class="text-center" type="text" id="CurrentMeter" name="CurrentMeter" value="" style="width:100%" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group row mt-2">
                                                                    <label class="col-md-12" for="input3" style="text-align: center">الكيلومترات المجانية </label>
                                                                    <div class="col-md-12">
                                                                        <input class="text-center" type="text" id="TotalFreeKm" name="TotalFreeKm" value="" style="width:100%" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group row mt-2">
                                                                    <label class="col-md-12" for="input3" style="text-align: center">العداد قبل تسليم السيارة </label>
                                                                    <div class="col-md-12">
                                                                        <input class="text-center" type="text" id="OldKm" name="OldKm" value="@ViewBag.OldCurrentKm" style="width:100%" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group row mt-2">
                                                                    <label class="col-md-12 " for="input3" style="text-align: center">الكيلومترات الإضافية </label>
                                                                    <div class="col-md-12">
                                                                        <input class="text-center" type="text" id="AdditionalKmNo" name="AdditionalKmNo" style="width:100%" value="@ViewBag.AdditionalKmNo" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <span id="CurrentMeterError" style="color: red; font-size: 12px; height: 30px; width: 300px; display:block "></span>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <div class="row">
                                                            <div class="col-md-4" style="float:right;">

                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 1</span>
                                                                            <input name="img1" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg1(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img1" class="zoom" style="float:left;width:100%;height:77px;object-fit:cover" />
                                                            </div>

                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 2</span>
                                                                            <input name="img2" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg2(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img2" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 3</span>
                                                                            <input name="img3" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg3(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img3" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />

                                                            </div>

                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 4</span>
                                                                            <input name="img4" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg4(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img4" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 5</span>
                                                                            <input name="img5" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg5(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img5" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 6</span>
                                                                            <input name="img6" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg6(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img6" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 7</span>
                                                                            <input name="img7" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg7(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img7" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 8</span>
                                                                            <input name="img8" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg8(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img8" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                            <div class="col-md-4" style="float:right;">
                                                                <div style="width:100%;float:left;">
                                                                    <div class="input-group">
                                                                        <span class="input-group-btn" style="width:100%">
                                                                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();" style="width:100%;height:25px;width:100%;line-height:10px;"> الصورة 9</span>
                                                                            <input name="img9" type="file" class="form-control " style="display: none; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadImg9(event)">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <img id="img9" class="zoom" style="float: left; width: 100%; height: 77px; object-fit: cover " />
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </fieldset>
                                </div>
                                <div class="tab" id="oneForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width_reglement">
                                        <div class="tab_reglement first" id="firstli" data-target-form="#accountForm" style="z-index:5">
                                            <span class="step "> بنود التأجير</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step"> المصروفات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#threeForm" style="z-index:3">
                                            <span class="step"> التعويضات</span>
                                        </div>
                                        <div class="tab_reglement" data-target-form="#towForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_reglement last" data-target-form="#oneForm" style="z-index:1">
                                            <span class="step active">الدفع</span>
                                        </div>
                                    </div>


                                    <div class="" style="">
                                        <fieldset class="fildest51">
                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الإيجار</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="RentalPrice" name="RentalPrice" style="float:right;width:100%" type="text" value="@ViewBag.RentalPrice" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الخيارات</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="ChoicesVal" name="ChoicesVal" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الإضافات</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="AdditionalVal" name="AdditionalVal" style="float:right;width:100%" type="text" value="@ViewBag.AdditionalVal" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة السائق الإضافي</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="AdditionalDriverVal" name="AdditionalDriverVal" style="float:right;width:100%" type="text" value="@ViewBag.AdditionalDriverVal" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الكيلوات الإضافية</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="ExtraKmValue" name="ExtraKmValue" style="float:right;width:100%" type="text" value="@ViewBag.ExtraKmValue" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الساعات الإضافية</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotalHoursValue" name="TotalHoursValue" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                            @*<div class="row">

                                </div>*@
                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة التفويض</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="AuthValue" name="AuthValue" style="float:right;width:100%" type="text" value="@ViewBag.AuthValue" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة العقد قبل الخصم</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="ContractValED" name="ContractValED" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">نسبة الخصم </label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="Discount" name="Discount" style="float:right;width:100%" type="text" value="@ViewBag.Discount" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-1">

                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة العقد بعد الخصم</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="ContractValID" name="ContractValID" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">قيمة الضريبة</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="Tax" name="Tax" style="float:right;width:100%" type="text" value="@ViewBag.Tax" readonly hidden>
                                                            <input autocomplete="off" class="form-control " id="TaxVal" name="TaxVal" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>

                                            </div>

                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">إجمالي العقد</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotalContractIT" name="TotalContractIT" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">إجمالي المصروفات</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotDepences" name="TotDepences" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">إجمالي التعويضات</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotCompensation" name="TotCompensation" style="float:right;width:100%" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">رصيد سابق</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="RenterPrevBalance" name="RenterPrevBalance" style="float:right;width:100%;text-align:right;direction:ltr;" type="text" value="@ViewBag.RenterPrevBalance" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">المبلغ المطلوب</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotToPay" name="TotToPay" style="float:right;width:100%;direction:ltr;text-align:right" type="text" value="" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-5" for="userName3" id="RestLabel">الباقي</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="reste" name="reste" style="float:right;width:100%;text-align:right;direction:ltr;" type="text" value="" readonly>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-6" for="userName3">المبلغ المدفوع</label>
                                                        <div class="col-md-6">
                                                            <input autocomplete="off" class="form-control " id="TotPayed" name="TotPayed" style="float: right; width: 65%; text-align: right; direction: ltr; height: 35px !important " type="text" value="">
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label for="userName3">طريقة الدفع</label>
                                                        <div>
                                                            @*<input autocomplete="off" class="form-control " id="facon_payer" name="facon_payer" style="float:right;width:100%" type="text" value="">*@
                                                            @Html.DropDownList("PayType", null, " --رجاء إختر طريقة الدفع-- ", htmlAttributes: new { @class = "form-control ", style = "float:right;width:85%;margin-right: 30px;height: 42px;border: 1px solid !important;", @disabled = "disabled" })
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label for="userName3">نقطة الدفع</label>
                                                        <div>
                                                            @*<input autocomplete="off" class="form-control " id="point_paiement" name="point_paiement" style="float:right;width:100%" type="text" value="">*@
                                                            @Html.DropDownList("CasherName", new SelectList(""), " --رجاء إختر نقطة البيع-- ", htmlAttributes: new { @class = "form-control ", style = "float:right;width:95%;margin-right: 30px;height: 42px;border: 1px solid !important;", @disabled = "disabled" })
                                                        </div>

                                                    </div>
                                                </div>

                                            </div>

                                            <div class="row mt-2">
                                                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                                                    <div class=" mb-3">
                                                        <label style="float:right;width:21.5%" for="userName3">ملاحظات</label>
                                                        <div style="float:right;width:74%">
                                                            <input autocomplete="off" class="form-control " id="remarque" name="remarque" style="float: right; width: 165%; height: 35px !important; margin-right: 30px; " type="text" maxlength="100" value="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>

                            </div>

                        </div>
                        <fieldset>
                            <div class="list-inline wizard mb-0">
                                <a href="/ContractSettlement/Index" class="btn btn-secondary text-white" style="float: right; margin-left: 20px; display: inline;">رجوع</a>
                                <button type="button" id="prevBtn" onclick="PrevPrev(-1)" class="btn btn-secondary" style="float: right; margin-left: 20px;">السابق</button>
                                @*@if (ViewBag.ContractCancel == "True")
                    {*@
                                <button type="button" id="nextBtn" onclick="nextPrev(1)" class="btn btn-secondary" style="float: left; margin-left: 20px;">التالي</button>
                                @*}*@
                                @*else
                    {
                        <button type="button" id="nextBtn" onclick="nextPrev(1)" class="btn btn-secondary" style="float: left; margin-left: 20px;" disabled title="عفوا لا يمكنك انهاء العقد قبل التاريخ المحدد">التالي</button>
                    }*@

                                <input type="submit" name="add" class="btn btn-secondary" id="add_btn" value="حفظ" style="display: none; float: left; margin-left: 20px; height: 38px !important" />
                                <input type="button" name="AuthBtn" class="btn btn-secondary" id="AuthBtn" value="الموحد" style="display: none; float: left; margin-left: 20px; height: 38px !important" hidden />
                                <input type="button" name="AuthBtn2" class="btn btn-secondary" id="AuthBtn2" value="إلغاء التفويض" style="display: none; float: left; margin-left: 20px; height: 38px !important; width: 100px;" />

                                @*<input name="RenterSignatureImg" type="file" class="form-control " style="display: block ; width:200px; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadRenterSignature(event)">*@

                            </div>
                        </fieldset>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</form>




<script>
    $(document).ready(function () {
        var startDate = $("#ContractStartDate").val();
        var endDateEx = $("#ContractEndDateEx").val();
        var endTimeEx = $("#ContractEndTimeEx").val();
        var endDate = $("#ContractEndDate").val();
        var startTime = $("#ContractStartTime").val();
        var endTime = $("#ContractEndTime").val()
        var freeAddHoursContract = $("#CR_Cas_Contract_Basic_Free_Additional_Hours").val();
        var additionalHours = $("#CR_Cas_Contract_Basic_Hour_Max").val();
        var extraHourValue = $("#ExtraHourValue").val();
        var DailyRentValue = $("#DailyRentValue").val();
        var rentalPrice = $("#RentalPrice").val();

        var dateTimeString = endDate + " " + startTime;
        console.log("dateTimeString :" + dateTimeString);
        var dateObj = new Date(dateTimeString);
        var eeeeDate = dateObj.getFullYear() + "-" + (dateObj.getMonth() + 1) + "-" + dateObj.getDate() + " " + dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();

        var dateTimeStringEx = endDateEx + " " + endTimeEx;
        console.log("dateTimeStringEx :" + dateTimeStringEx);
        var dateObjEx = new Date(dateTimeStringEx);
        var eeeeDateEx = dateObjEx.getFullYear() + "-" + (dateObjEx.getMonth() + 1) + "-" + dateObjEx.getDate() + " " + dateObjEx.getHours() + ":" + dateObjEx.getMinutes() + ":" + dateObjEx.getSeconds();
        var today = new Date(eeeeDateEx);
        var eDate = new Date(eeeeDate);
        console.log("today:" + today)
        console.log("eDate:" + eDate)

        var dateTimeString1 = endDate + " " + startTime;
        var dateTimeStringEx1 = endDateEx + " " + endTimeEx;

        var endDate = new Date(dateTimeString1);
        var endDateEx = new Date(dateTimeStringEx1);

        var startHour = endDate.getHours();
        var startMinute = endDate.getMinutes();
        var startSecond = endDate.getSeconds();

        var endHour = endDateEx.getHours();
        var endMinute = endDateEx.getMinutes();
        var endSecond = endDateEx.getSeconds();

        var endTimeOnly = startHour + ":" + startMinute + ":" + startSecond;
        var endTimeOnlyEx = endHour + ":" + endMinute + ":" + endSecond;
        const now = new Date();
        const dateEndTimeOnlyEx = new Date(`${now.toDateString()} ${endTimeOnlyEx}`);
        const dateEndTimeOnly = new Date(`${now.toDateString()} ${endTimeOnly}`);

        //console.log("dateEndTimeOnlyEx:" + dateEndTimeOnlyEx)
        //console.log("dateEndTimeOnly:" + dateEndTimeOnly)
        var differenceInMsEx = dateEndTimeOnlyEx - dateEndTimeOnly;
        var differenceInHoursEx = Math.round(differenceInMsEx / (1000 * 60 * 60));
        console.log("Total Hours EX :" + differenceInHoursEx)

        if (today > eDate) {
            console.log("Welcome :" + "Ahmed ")
            if (differenceInHoursEx > 0) {
                if (parseInt(freeAddHoursContract) != 0) {
                    differenceInHoursEx = differenceInHoursEx - parseInt(freeAddHoursContract);
                    console.log("freeAddHoursContract:" + freeAddHoursContract)
                    if (differenceInHoursEx > 0) {
                        if (parseInt(additionalHours) <= parseInt(differenceInHoursEx)) {

                            $("#TotalHoursValue").val(parseFloat(additionalHours) * parseFloat(extraHourValue));
                            differenceInHoursEx = differenceInHoursEx - additionalHours;
                            console.log("differenceInHoursEx:" + differenceInHoursEx)

                            if (differenceInHoursEx > 0) {
                                rentalPrice = parseFloat(DailyRentValue).toFixed(2);
                                $("#textErr").text(`عدد الساعات المتاخرة ${differenceInHoursEx} وستحاسب عليهم بسعر اليوم `);
                                localStorage.setItem('extraDayValue', differenceInHoursEx);
                                localStorage.setItem('key', rentalPrice);
                                console.log("rentalPrice:" + rentalPrice);

                            } else {
                                localStorage.setItem('key', 0);
                                localStorage.setItem('extraDayValue', 0);

                                $("#textErr").text("");
                            }
                        }
                    }
                    else {
                        $("#TotalHoursValue").val(0);
                        localStorage.setItem('key', 0);
                        $("#textErr").text("");
                        localStorage.setItem('extraDayValue', 0);

                    }
                }
            }
            else {
                $("#TotalHoursValue").val("0.00");
                localStorage.setItem('key', 0);
                $("#textErr").text("");
                localStorage.setItem('extraDayValue', 0);

            }
        }
        else {
            $("#textErr").text("");
            $("#TotalHoursValue").val(0);
            localStorage.setItem('key', 0);
            localStorage.setItem('extraDayValue', 0);

        }
        
    })

</script>

<script type="text/javascript">
    //$(document).ready(function () {
    //    $("#ContractEndDate").change(function () {
    //        var v = document.getElementById("#ContractEndDate").value;
    //        alert(v);
    //    });
    //    $("#ContractEndDate").focusout(function () {
    //        var v = document.getElementById("#ContractEndDate").value;
    //        alert(v);
    //    });
    //});
    function updateDays() {

    }

    function affich_affich_1(e) {
        var date = e.target.value;
        document.getElementById("ContractEndDateEx").value = date;
        var endDate = document.getElementById("date_btn1").value;
        var startDate = document.getElementById("ContractStartDate").value;
        var days = document.getElementById("ContractDaysNbr");
        console.log(endDate);
        console.log(startDate);

        const date1 = new Date(startDate);
        const date2 = new Date(endDate);

        console.log(date2 - date1)

        // Calculate the difference in milliseconds
        const differenceInMs = Math.abs(date2 - date1);

        // Convert the difference to days
        const differenceInDays = Math.ceil(differenceInMs / (1000 * 60 * 60 * 24));
        if (differenceInDays == 0) {
            console.log(differenceInDays + "A7a1");
            days.value = 1;
        }
        else {
            days.value = differenceInDays-1;
        }
        if (days.value == 0) {
            days.value = 1;
        }
        console.log(differenceInDays + "A7a2"); // Output: 3
         cal();

    }
    function affich_btn_1(e) {
        var date = e.target.value;
        document.getElementById("date_btn1").value = date;
    }
</script>
<script>
    function cal() {
        var startDate = $("#ContractStartDate").val();
        var endDateEx = $("#ContractEndDateEx").val();
        var endTimeEx = $("#ContractEndTimeEx").val();
        var endDate = $("#ContractEndDate").val();
        var startTime = $("#ContractStartTime").val();
        var endTime = $("#ContractEndTime").val()
        var freeAddHoursContract = $("#CR_Cas_Contract_Basic_Free_Additional_Hours").val();
        var additionalHours = $("#CR_Cas_Contract_Basic_Hour_Max").val();
        var extraHourValue = $("#ExtraHourValue").val();
        var DailyRentValue = $("#DailyRentValue").val();
        var rentalPrice = $("#RentalPrice").val();

        var dateTimeString = endDate + " " + startTime;
        console.log("dateTimeString :" + dateTimeString);
        var dateObj = new Date(dateTimeString);
        var eeeeDate = dateObj.getFullYear() + "-" + (dateObj.getMonth() + 1) + "-" + dateObj.getDate() + " " + dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();

        var dateTimeStringEx = endDateEx + " " + endTimeEx;
        console.log("dateTimeStringEx :" + dateTimeStringEx);
        var dateObjEx = new Date(dateTimeStringEx);
        var eeeeDateEx = dateObjEx.getFullYear() + "-" + (dateObjEx.getMonth() + 1) + "-" + dateObjEx.getDate() + " " + dateObjEx.getHours() + ":" + dateObjEx.getMinutes() + ":" + dateObjEx.getSeconds();
        var today = new Date(eeeeDateEx);
        var eDate = new Date(eeeeDate);
        console.log("today:" + today)
        console.log("eDate:" + eDate)

        var dateTimeString1 = endDate + " " + startTime;
        var dateTimeStringEx1 = endDateEx + " " + endTimeEx;

        var endDate = new Date(dateTimeString1);
        var endDateEx = new Date(dateTimeStringEx1);

        var startHour = endDate.getHours();
        var startMinute = endDate.getMinutes();
        var startSecond = endDate.getSeconds();

        var endHour = endDateEx.getHours();
        var endMinute = endDateEx.getMinutes();
        var endSecond = endDateEx.getSeconds();

        var endTimeOnly = startHour + ":" + startMinute + ":" + startSecond;
        var endTimeOnlyEx = endHour + ":" + endMinute + ":" + endSecond;
        const now = new Date();
        const dateEndTimeOnlyEx = new Date(`${now.toDateString()} ${endTimeOnlyEx}`);
        const dateEndTimeOnly = new Date(`${now.toDateString()} ${endTimeOnly}`);

        //console.log("dateEndTimeOnlyEx:" + dateEndTimeOnlyEx)
        //console.log("dateEndTimeOnly:" + dateEndTimeOnly)
        var differenceInMsEx = dateEndTimeOnlyEx - dateEndTimeOnly;
        var differenceInHoursEx = Math.round(differenceInMsEx / (1000 * 60 * 60));
        console.log("Total Hours EX :" + differenceInHoursEx)

        if (today > eDate) {
            console.log("Welcome :" + "Ahmed ")
            var d = differenceInHoursEx + parseInt(freeAddHoursContract) + parseFloat(additionalHours);
            console.log("d  :" + d)

            if (differenceInHoursEx > 0) {
                if (parseInt(freeAddHoursContract) != 0) {
                    differenceInHoursEx = differenceInHoursEx - parseInt(freeAddHoursContract);
                    console.log("freeAddHoursContract:" + freeAddHoursContract)
                    if (differenceInHoursEx > 0) {
                        if (parseInt(additionalHours) <= parseInt(differenceInHoursEx)) {
                            $("#TotalHoursValue").val(parseFloat(additionalHours) * parseFloat(extraHourValue));
                            differenceInHoursEx = differenceInHoursEx - additionalHours;
                            console.log("differenceInHoursEx:" + differenceInHoursEx)
                            if (differenceInHoursEx > 0) {
                                rentalPrice = parseFloat(DailyRentValue).toFixed(2);
                                $("#textErr").text(`عدد الساعات المتاخرة ${differenceInHoursEx} وستحاسب عليهم بسعر اليوم `);
                                localStorage.setItem('extraDayValue', differenceInHoursEx);
                                localStorage.setItem('key', rentalPrice);

                                console.log("rentalPrice:" + rentalPrice);
                            } else {
                                localStorage.setItem('extraDayValue', 0);
                                localStorage.setItem('key', 0);
                                $("#textErr").text("");
                            }
                        }
                    }
                    else {
                        localStorage.setItem('extraDayValue', 0);
                        $("#TotalHoursValue").val(0);
                        localStorage.setItem('key', 0);
                        $("#textErr").text("");
                    }
                }
            }
            else {
                localStorage.setItem('extraDayValue', 0);
                $("#TotalHoursValue").val("0.00");
                localStorage.setItem('key', 0);
                $("#textErr").text("");
            }
        }
        else {
            localStorage.setItem('extraDayValue', 0);
            $("#textErr").text("");
            $("#TotalHoursValue").val(0);
            localStorage.setItem('key', 0);
        }
        var kmFreeDaily = $("#CR_Cas_Contract_Basic_Daily_Free_KM").val();
        var valueChoices = $("#CR_Cas_Contract_Basic_Choices_Value").val();
        var ExNbrDays = $("#ContractDaysNbr").val();
        var extraDay = localStorage.getItem('extraDayValue');
        if (extraDay >0) {
            ExNbrDays++;
        }
        console.log("kmFreeDaily :" + kmFreeDaily)
        console.log("ContractDaysNbr :" + ExNbrDays)
        $("#TotalFreeKm").val(parseInt(ExNbrDays) * parseInt(kmFreeDaily));
        $("#ChoicesVal").val(parseInt(ExNbrDays) * parseInt(valueChoices));
    }
    
       
   
</script>
<script>
    $(document).ready(function () {
        var kmFreeDaily = $("#CR_Cas_Contract_Basic_Daily_Free_KM").val();
        var valueChoices = $("#CR_Cas_Contract_Basic_Choices_Value").val();
        if (@Session["ContractCancel"].ToString().ToLower() == "true") {
            var ExNbrDays = $("#ContractDaysNbr").val();
             console.log("User is logged in.");
             console.log(ContractDaysNbr);

        } else {
             var ExNbrDays = $("#ExContractDaysNbr").val();
             console.log("User is not logged in.");
             console.log(ContractDaysNbr);
        }
        var extraDay = localStorage.getItem('extraDayValue');
        console.log("extraDay:" + extraDay)
        if (extraDay > 0) {
            ExNbrDays++;
        }
        console.log("kmFreeDaily :" + kmFreeDaily)
        console.log("ContractDaysNbr :" + ExNbrDays)
        $("#TotalFreeKm").val(parseInt(ExNbrDays) * parseInt(kmFreeDaily));
        $("#ChoicesVal").val(parseInt(ExNbrDays) * parseInt(valueChoices));
    });
</script>

<script type="text/javascript">
    var Auth = false;

    // Restricts input for each element in the set of matched elements to the given inputFilter.
    (function ($) {
        $.fn.inputFilter = function (inputFilter) {
            return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
                if (inputFilter(this.value)) {
                    this.oldValue = this.value;
                    this.oldSelectionStart = this.selectionStart;
                    this.oldSelectionEnd = this.selectionEnd;
                } else if (this.hasOwnProperty("oldValue")) {
                    this.value = this.oldValue;
                    this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                } else {
                    this.value = "";
                }
            });
        };
    }(jQuery));

    // Install input filters.
    $("#inputinteger").inputFilter(function (value) { return /^\d*$/.test(value) && (value === "" || parseInt(value) <= 100000); });
    $("#ContractDiscount").inputFilter(function (value) { return /^-?\d*[.]?\d{0,2}$/.test(value) && (value === "" || parseInt(value) <= 100); });
    $("#TotalPayed").inputFilter(function (value) { return /^-?\d*[.]?\d{0,2}$/.test(value) && (value === "" || parseInt(value) <= 1000000); });

</script>
<script>
    function validateFloatKey(ele, ev) {
        var errMsg = document.getElementById('errMsg'),
            val = ele.value,
            success = false;
        regEx = /^\d*\.?\d{0, 2}$/;
        if (regEx.test(ele.value)) {
            errMsg.style.display = 'none';
            ele.parentNode.classList.remove('error');
            console.log(ele.value);
            success = true;
        } else {
            ele.parentNode.classList.add('error');
            errMsg.style.display = 'block';
        }
        return success;
    }
</script>
<script>
    function validateFloatKeypourcent(ele, ev) {
        var errMsg = document.getElementById('errMsg'),
            val = ele.value,
            success = false;
        regEx = /^\d*\.?\d{0,2}$/;
        if (regEx.test(ele.value)) {
            errMsg.style.display = 'none';
            ele.parentNode.classList.remove('error');
            console.log(ele.value);
            success = true;
        } else {
            if (ele.value > 100) {
                ele.parentNode.classList.add('error');
                errMsg.style.display = 'block';
            }
        }
        return success;
    }
</script>
<script>
    var loadImg1 = function (event) {
        var image = document.getElementById('img1');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg2 = function (event) {
        var image = document.getElementById('img2');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg3 = function (event) {
        var image = document.getElementById('img3');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg4 = function (event) {
        var image = document.getElementById('img4');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg5 = function (event) {
        var image = document.getElementById('img5');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg6 = function (event) {
        var image = document.getElementById('img6');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg7 = function (event) {
        var image = document.getElementById('img7');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg8 = function (event) {
        var image = document.getElementById('img8');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg9 = function (event) {
        var image = document.getElementById('img9');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
<script>
    var loadImgx1 = function (event) {
        var image = document.getElementById('imgx1');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgx2 = function (event) {
        var image = document.getElementById('imgx2');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgx3 = function (event) {
        var image = document.getElementById('imgx3');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgx4 = function (event) {
        var image = document.getElementById('imgx4');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
<script>
    var loadImgy1 = function (event) {
        var image = document.getElementById('imgy1');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgy2 = function (event) {
        var image = document.getElementById('imgy2');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgy3 = function (event) {
        var image = document.getElementById('imgy3');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImgy4 = function (event) {
        var image = document.getElementById('imgy4');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
<div id="myModal1" class="modal1">
    <span class="close">&times;</span>
    <img class="modal-content1" id="img01">
    <div id="caption"></div>
</div>

<script>
    // Get the modal
    var modal = document.getElementById("myModal1");

    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img = document.getElementById("img1");
    var modalImg = document.getElementById("img01");
    img.onclick = function () {
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img2 = document.getElementById("img2");
    var modalImg2 = document.getElementById("img01");
    img2.onclick = function () {
        modal.style.display = "block";
        modalImg2.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img3 = document.getElementById("img3");
    var modalImg3 = document.getElementById("img01");
    img3.onclick = function () {
        modal.style.display = "block";
        modalImg3.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img4 = document.getElementById("img4");
    var modalImg4 = document.getElementById("img01");
    img4.onclick = function () {
        modal.style.display = "block";
        modalImg4.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img5 = document.getElementById("img5");
    var modalImg5 = document.getElementById("img01");
    img5.onclick = function () {
        modal.style.display = "block";
        modalImg5.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img6 = document.getElementById("img6");
    var modalImg6 = document.getElementById("img01");
    img6.onclick = function () {
        modal.style.display = "block";
        modalImg6.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img7 = document.getElementById("img7");
    var modalImg7 = document.getElementById("img01");
    img7.onclick = function () {
        modal.style.display = "block";
        modalImg7.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img8 = document.getElementById("img8");
    var modalImg8 = document.getElementById("img01");
    img8.onclick = function () {
        modal.style.display = "block";
        modalImg8.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img9 = document.getElementById("img9");
    var modalImg9 = document.getElementById("img01");
    img9.onclick = function () {
        modal.style.display = "block";
        modalImg9.src = this.src;
        captionText.innerHTML = this.alt;
    }


    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgx1 = document.getElementById("imgx1");
    var modalImgx1 = document.getElementById("img01");
    imgx1.onclick = function () {
        modal.style.display = "block";
        modalImgx1.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgx2 = document.getElementById("imgx2");
    var modalImgx2 = document.getElementById("img01");
    imgx2.onclick = function () {
        modal.style.display = "block";
        modalImgx2.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgx3 = document.getElementById("imgx3");
    var modalImgx3 = document.getElementById("img01");
    imgx3.onclick = function () {
        modal.style.display = "block";
        modalImgx3.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgx4 = document.getElementById("imgx4");
    var modalImgx4 = document.getElementById("img01");
    imgx4.onclick = function () {
        modal.style.display = "block";
        modalImgx4.src = this.src;
        captionText.innerHTML = this.alt;
    }


    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgy1 = document.getElementById("imgy1");
    var modalImgy1 = document.getElementById("img01");
    imgy1.onclick = function () {
        modal.style.display = "block";
        modalImgy1.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgy2 = document.getElementById("imgy2");
    var modalImgy2 = document.getElementById("img01");
    imgy2.onclick = function () {
        modal.style.display = "block";
        modalImgy2.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgy3 = document.getElementById("imgy3");
    var modalImgy3 = document.getElementById("img01");
    imgy3.onclick = function () {
        modal.style.display = "block";
        modalImgy3.src = this.src;
        captionText.innerHTML = this.alt;
    }
    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var imgy4 = document.getElementById("imgy4");
    var modalImgy4 = document.getElementById("img01");
    imgy4.onclick = function () {
        modal.style.display = "block";
        modalImgy4.src = this.src;
        captionText.innerHTML = this.alt;
    }

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

</script>

<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the current tab

    function showTab(n) {

        // This function will display the specified tab of the form...
        var x = document.getElementsByClassName("tab");
        console.log(x);
        x[n].style.display = "block";
        console.log(n);
        //... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        }
        if (n == 4) {
            Calculate();
        }
        //else {
        //    document.getElementById("prevBtn").style.display = "inline";
        //}
        if (n == (x.length - 1)) {
            //document.getElementById("nextBtn").innerHTML = "حفظ";
            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("add_btn").style.display = "inline";
            document.getElementById("AuthBtn").style.display = "inline";
            document.getElementById("AuthBtn2").style.display = "inline";
        } else {
            document.getElementById("add_btn").style.display = "none";
            document.getElementById("nextBtn").style.display = "inline";
            document.getElementById("nextBtn").innerHTML = "التالي";
            document.getElementById("AuthBtn").style.display = "none";
            document.getElementById("AuthBtn2").style.display = "none";
        }
        //... and run a function that will display the correct step indicator:
        //fixStepIndicator(n)
    }

    function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        var depencesCheckbox = document.getElementById("Chk_Depences");// المصروفات
        var compensationCheckbox = document.getElementById("Chk_Compensation");// التعويضات
        var Depences = document.getElementById("Depences").value;// التعويضات
        var CompensationVal = document.getElementById("CompensationVal").value;// التعويضات
        var CurrentMeter = document.getElementById("CurrentMeter").value;// التعويضات
        
        // Hide the current tab:'
        x[currentTab].style.display = "none";
        document.getElementById("prevBtn").style.display = "inline";
        if (currentTab == 0) {
            if (depencesCheckbox.checked == false && compensationCheckbox.checked == false) {
                currentTab = currentTab + n + 2;
            }
            if (depencesCheckbox.checked == true && compensationCheckbox.checked == true) {
                currentTab = currentTab + n;
            }
            if (depencesCheckbox.checked == true && compensationCheckbox.checked == false) {
                currentTab = currentTab + n;
            }
            if (depencesCheckbox.checked == false && compensationCheckbox.checked == true) {
                currentTab = currentTab + n + 1;
            }
        }
        else if (currentTab == 1) {
            if (compensationCheckbox.checked == true) {
               
                    var m = 0;
                    var ig1 = $('#imgx1').attr('src');
                    var ig2 = $('#imgx2').attr('src');
                    var ig3 = $('#imgx3').attr('src');
                    var ig4 = $('#imgx4').attr('src');
                    if (ig1) m = m + 1;
                    if (ig2) m = m + 1;
                    if (ig3) m = m + 1;
                    if (ig4) m = m + 1;

                    if (Depences != null && Depences != "" && m >=1) {
                        currentTab = currentTab + n;
                    }
                    else {
                        toastr.info("الرجاء ادخال قيمة المصروفات وصورة واحدة علي الاقل");
                    }
            }

            else {
                var m = 0;
                var ig1 = $('#imgx1').attr('src');
                var ig2 = $('#imgx2').attr('src');
                var ig3 = $('#imgx3').attr('src');
                var ig4 = $('#imgx4').attr('src');
                if (ig1) m = m + 1;
                if (ig2) m = m + 1;
                if (ig3) m = m + 1;
                if (ig4) m = m + 1;

                if (Depences != null && Depences != "" && m >= 1) {
                    currentTab = currentTab + n + 1;
                }
                else {
                    toastr.info("الرجاء ادخال قيمة المصروفات وصورة واحدة علي الاقل");
                }
            }
        }
        else if (currentTab == 2) {
            var m = 0;
            var ig1 = $('#imgy1').attr('src');
            var ig2 = $('#imgy2').attr('src');
            var ig3 = $('#imgy3').attr('src');
            var ig4 = $('#imgy4').attr('src');
            if (ig1) m = m + 1;
            if (ig2) m = m + 1;
            if (ig3) m = m + 1;
            if (ig4) m = m + 1;
            if (CompensationVal != null && CompensationVal != "" && m >= 1) {
                currentTab = currentTab + n;
            }
            else {
                toastr.info("الرجاء ادخال قيمة التعويضات وصورة واحدة علي الاقل");
            }
        }

        else if (currentTab == 3) {
            if (CheckInspection() == true) {
                var m = 0;
                var ig1 = $('#img1').attr('src');
                var ig2 = $('#img2').attr('src');
                var ig3 = $('#img3').attr('src');
                var ig4 = $('#img4').attr('src');
                var ig5 = $('#img5').attr('src');
                var ig6 = $('#img6').attr('src');
                var ig7 = $('#img7').attr('src');
                var ig8 = $('#img8').attr('src');
                var ig9 = $('#img9').attr('src');
                if (ig1) m = m + 1;
                if (ig2) m = m + 1;
                if (ig3) m = m + 1;
                if (ig4) m = m + 1;
                if (ig5) m = m + 1;
                if (ig6) m = m + 1;
                if (ig7) m = m + 1;
                if (ig8) m = m + 1;
                if (ig9) m = m + 1;
                if (CurrentMeter != null && CurrentMeter != "" && m >= 3) {
                    currentTab = currentTab + n;
                }
                else {
                    toastr.info("الرجاء ادخال  قراءة العداد الحالي وثلاث صور علي الاقل");
                }
            }
            else {
                toastr.info("الرجاء التحقق من الفحص الظاهري");
            }
           
        }
        else {
            currentTab = currentTab + n;
        }

        // if you have reached the end of the form...
        if (currentTab >= x.length) {
            // ... the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
    }

    function PrevPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        var depencesCheckbox = document.getElementById("Chk_Depences");// المصروفات
        var compensationCheckbox = document.getElementById("Chk_Compensation");// التعويضات
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";


        if (currentTab == 1) {
            currentTab = currentTab + n;
        }
        else if (currentTab == 2) {
            if (depencesCheckbox.checked == false) {
                currentTab = 0;
            }
            else {
                currentTab = 1
            }
        }
        else if (currentTab == 3) {
            if (depencesCheckbox.checked == false && compensationCheckbox.checked == false) {
                currentTab = 0;
            }
            else if (compensationCheckbox.checked == false) {
                currentTab = 1
            }
            else if (depencesCheckbox.checked == false) {
                currentTab = 2
            }
            else {
                currentTab = currentTab + n;
            }
        }
        else {
            currentTab = currentTab + n;
        }

        // if you have reached the end of the form...
        if (currentTab >= x.length) {
            // ... the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        showTab(currentTab);
    }


</script>
<script type="text/javascript">
    function CheckInspection() {
        var n = 0;
        var grid = document.getElementById("InspectionTable");

        //Reference the CheckBoxes in Table.
        var checkbox = grid.getElementsByClassName("ChkChoicesList");
        console.log(checkbox)

        //Loop through the CheckBoxes.
        for (var i = 0; i < checkbox.length; i++) {
            if (checkbox[i].type == "checkbox") {
                if (checkbox[i].checked) {
                    n = n + 1;
                }
            }
        }
        if ((n == checkbox.length)) {
            return true;
        } else {
            return false;
            console.log("false")
            toastr.warning("الرجاء اكمال الفحص الضاهري");
        }
    }
</script>

<div id="myModal1" class="modal1">
    <span class="close">&times;</span>
    <img class="modal-content1" id="img01">
    <div id="caption"></div>
</div>


@* ///////////////////////////////////////////////////////////////////////////////////////////////////////////*@


<script type="text/javascript">
    $(document).on("keypress", 'form', function (e) {
        var code = e.keyCode || e.which;
        if (code == 13) {
            e.preventDefault();
            return false;
        }
    });
</script>

<script>
    //////////////// disable auto validate on enter click ///////////////
    $(document).keypress(function (e) {
        if (e.keyCode === 13) {
            e.preventDefault();
            return false;
        }
    });
    ////////////////////////////////////////////////////////////////////
</script>


<script>
    $(document).ready(function () {
        $("#CurrentMeter").focusout(function () {
            var OldCurrentKm = document.getElementById('OldCurrentKm').value;
            var CurrentMeter = document.getElementById('CurrentMeter').value;
            var TotalFreeKm = document.getElementById('TotalFreeKm').value;
            console.log("TotalFreeKm:" + TotalFreeKm);

            //TotalFreeKm = parseInt(nbrDaysEx);
            console.log("TotalFreeKm:" + TotalFreeKm);
            if (parseFloat(CurrentMeter) > (parseFloat(OldCurrentKm) + parseFloat(TotalFreeKm))) {
                var c = parseFloat(CurrentMeter) - (parseFloat(OldCurrentKm) + parseFloat(TotalFreeKm));
                document.getElementById('AdditionalKmNo').value = c;
            } else {

                document.getElementById('AdditionalKmNo').value = 0;
            }
            var KmNo = parseInt(document.getElementById('AdditionalKmNo').value);
            var KmValue = parseFloat(document.getElementById('AdditionalKmValue').value);
            var ExtraKmValue = KmNo * KmValue
            if (ExtraKmValue > 0) {
                document.getElementById('ExtraKmValue').value = ExtraKmValue.toFixed(2);
            } else {
                document.getElementById('ExtraKmValue').value = "0.00";
            }


        });
    });
    /////////////////////////////////
    
</script>
<script>
    $("#CurrentMeter").focusout(function () {
        console.log("AAAAAAAAAAAAAAAAAAA");
        var OldKm = Number(document.getElementById("OldKm").value);
        var NewCurrentMeter = Number(document.getElementById('CurrentMeter').value);
        console.log(OldKm);
        console.log(NewCurrentMeter);
        if (NewCurrentMeter < OldKm) {
            document.getElementById('CurrentMeterError').innerHTML = "لا يمكن أن يكون أقل من" + OldKm;
        } else {
            document.getElementById('CurrentMeterError').innerHTML = "";
        }
    })
</script>
<script>



    function Calculate() {
        var ExtraKmValue = document.getElementById('ExtraKmValue').value;
        if (ExtraKmValue == "") {
            document.getElementById('ExtraKmValue').value = "0.00";
        }
        var AdditionalHours = parseInt(document.getElementById('AdditionalHours').value);
        var ExtraHourValue  = parseFloat(document.getElementById('ExtraHourValue').value);
        if (@Session["ContractCancel"].ToString().ToLower() == "true") {
             var ContractDaysNbr = parseFloat(document.getElementById('ContractDaysNbr').value);
             console.log("User is logged in.");
             console.log(ContractDaysNbr);

        } else {
             var ContractDaysNbr = parseFloat(document.getElementById('ExContractDaysNbr').value);
             console.log("User is not logged in.");
             console.log(ContractDaysNbr);

        }
        var extraDay = localStorage.getItem('extraDayValue');
        if (extraDay > 0) {
            ContractDaysNbr++;
        }


      //var ContractDaysNbr = parseFloat(document.getElementById('ContractDaysNbr').value);

        var DailyRentValue = parseFloat(document.getElementById('DailyRentValue').value);
        var RentalPrice = DailyRentValue * ContractDaysNbr;

      //var x = document.getElementById('RentalPrice').value;

        var valueRental = localStorage.getItem('key');

        console.log("valueRental"+valueRental);
        console.log("RentalPrice" + RentalPrice);

        document.getElementById('RentalPrice').value = (parseFloat(valueRental) + parseFloat(RentalPrice)).toFixed(2);

      //localStorage.removeItem('key');

        var r = document.getElementById('RentalPrice').value;
        console.log("r" + r);

        var RentalPrice = parseFloat(document.getElementById('RentalPrice').value);
        var ChoicesVal = parseFloat(document.getElementById('ChoicesVal').value);
        var AdditionalDriverVal = parseFloat(document.getElementById('AdditionalDriverVal').value);
        var AdditionalVal = parseFloat(document.getElementById('AdditionalVal').value);
        var ExtraKmValue = parseFloat(document.getElementById('ExtraKmValue').value);
        var TotalHoursValue = parseFloat(document.getElementById('TotalHoursValue').value);
        var AuthValue = parseFloat(document.getElementById('AuthValue').value);
        var ContractValED = (parseFloat(r) + ChoicesVal + AdditionalDriverVal + AdditionalVal + ExtraKmValue + TotalHoursValue + AuthValue);

        document.getElementById('ContractValED').value = ContractValED.toFixed(2);
        var Discount = parseFloat(document.getElementById('Discount').value);
        var DiscountVal = ContractValED * Discount / 100;
        var ContractValID = (ContractValED - DiscountVal).toFixed(2);
        document.getElementById('ContractValID').value = ContractValID;
        var Tax = parseFloat(document.getElementById('Tax').value);
        var TaxVal = (ContractValID * (Tax / 100)).toFixed(2);
        document.getElementById('TaxVal').value = TaxVal;
        var ContractValIT = (ContractValID * (1 + (Tax / 100))).toFixed(2);
        document.getElementById('TotalContractIT').value = ContractValIT;
        var depences = document.getElementById('Depences').value;
        if (depences == "") {
            document.getElementById('TotDepences').value = "0.00";
            depences = 0;
            //alert(1);
        } else {
            document.getElementById('TotDepences').value = depences;
            //alert(2);
        }


        //var InsuranceVal = document.getElementById('InsuranceVal').value;
        //if (InsuranceVal == "") {
        //    InsuranceVal = 0;
        //}
        var CompensationVal = document.getElementById('CompensationVal').value;
        if (CompensationVal == "") {
            CompensationVal = 0;
        }

        var TotCompensation = parseFloat(CompensationVal);
        document.getElementById('TotCompensation').value = TotCompensation.toFixed(2);


        var RenterPrevBalance = parseFloat(document.getElementById('RenterPrevBalance').value);
        var TotToPay = parseFloat(ContractValIT) + parseFloat(TotCompensation) + parseFloat(RenterPrevBalance) - parseFloat(depences);
        //alert(TotToPay);
        document.getElementById('TotToPay').value = TotToPay.toFixed(2);

        document.getElementById('TotPayed').focus;


    }

    $(document).ready(function () {
        $('#TotPayed').focusout(function () {
            var TotPayed = document.getElementById('TotPayed').value;
            var TotToPay = Number(document.getElementById('TotToPay').value);
            if (TotPayed != "") {
                TotPayed = Number(TotPayed);
                if (TotToPay > 0) {
                    var reste = TotPayed - TotToPay;
                } else {
                    var reste = TotPayed + TotToPay;
                }
                if (reste == 0) {
                    document.getElementById('RestLabel').innerHTML = "الباقي";
                } else if (reste > 0) {
                    document.getElementById('RestLabel').innerHTML = "الباقي للمستأجر";
                } else {
                    document.getElementById('RestLabel').innerHTML = "الباقي على للمستأجر";
                }
                document.getElementById('reste').value = reste.toFixed(2);
            }
            else {
                document.getElementById('reste').value = "";

            }
        })
    })
</script>

<script>
    $(document).ready(function () {
        $("#PayType").change(function () {
            $.get("/ContractSettlement/GetSalesPoint", { PayCode: $("#PayType").val() }, function (data) {
                $("#CasherName").empty();
                $.each(data, function (index, row) {
                    $("#CasherName").append("<option value= '" + row.CR_Cas_Sup_SalesPoint_Code + "'>" + row.CR_Cas_Sup_SalesPoint_Ar_Name + "</option>")
                });
            });
        })
    });
</script>


<script>
    $(document).ready(function () {
        $("#TotPayed").focusout(function () {

            var TotPayed = parseFloat(document.getElementById('TotPayed').value);
            if (TotPayed > 0) {
                document.getElementById('PayType').disabled = false;
                document.getElementById('CasherName').disabled = false;
            } else {
                document.getElementById('PayType').disabled = true;
                document.getElementById('CasherName').disabled = true;
            }
        });
    });
</script>

<script>
    //$(document).ready(function () {
    //    $("#PayType").change(function () {
    //        var BtnAdd = document.getElementById('add_btn');
    //        BtnAdd.disabled = false;
    //    })
    //});
</script>


<script>
    var endDate = document.getElementById("ContractEndDateEx").value;
    var startDate = document.getElementById("ContractStartDate").value;
    var days = document.getElementById("ContractDaysNbr");
    var rentaldays = document.getElementById("CR_Cas_Contract_Basic_Expected_Rental_Days");
    console.log(endDate);
    console.log(startDate);
    console.log(rentaldays);



    const date1 = new Date(startDate);
    const date2 = new Date(endDate);

    // Calculate the difference in milliseconds
    const differenceInMs = Math.abs(date2 - date1);

    // Convert the difference to days
    const differenceInDays = Math.ceil(differenceInMs / (1000 * 60 * 60 * 24));
    if (differenceInDays == 0) {
        console.log(differenceInDays + "11111111");
        days.value = 1;
    }
    else {
        days.value = differenceInDays;
    }
    console.log(differenceInDays + "222222222"); // Output: 3
</script>
<script>





    $(document).ready(function () {
        var today = new Date();
        today.setHours(0, 0, 0, 0);
        $('#date_btn1').hijriDatePicker({
            minDate: today.toString(),
            format: "YYYY-MM-DD",
            showSwitcher: false,
            hijri: false,
            debug: false,
            keepOpen: false
        });
    });


</script>




