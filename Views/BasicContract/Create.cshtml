@model RentCar.Models.CR_Cas_Contract_Basic

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutSys3.cshtml";
}

<style>
    .tab_price {
        height: 50px !important;
    }

    .row {
        min-height: 40px;
    }

    .last_tab .row {
        min-height: 36px;
    }
</style>
<style>
    #date_btn1, #date_btn2, #date_btn3 {
        font-size: 0 !important;
        background: url('../../BSys3Styles/Images/icone_calendre.png') center 3px no-repeat;
        width: 30px;
        border: none;
        border-left: 0;
        height: 27px;
        position: absolute;
        left: 17px;
        margin-top: -29px;
    }

    .label6 {
        display: flex;
        align-items: center;
    }

    input[type=text] {
        color: #0288C7;
    }

    .table-striped tbody {
        display: block;
        max-height: 333px !important;
        overflow-y: scroll;
    }
   
</style>


<div id="loader" hidden>
        <div id="status">
            <img src="~/BSys3Styles/Images/logo.png" style="width:150px;height:150px;margin:25px ;" />
        </div>
</div>


<!-- HTML -->
<!--tabs amir end-->
<form id="ContractForm" class="form-horizontal" action="/BasicContract/Create" enctype="multipart/form-data" method="post" data-parsley-validate="" novalidate="" style="font-family:Arial">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="card" style="height:100%">
                    <fieldset class="card-body" style="padding-bottom:0px;padding-top:0px;border:none;">

                        <center><h3 class="header-title" style="color:#0288C7;font-size:30px;">تحرير عقد</h3></center>
                        <div id="regForm">
                            <div style="min-height:70%">

                                <div class="tab" id="accountForm">
                                    <div>
                                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                                        <!-- Circles which indicates the steps of the form: -->
                                        <div class="row tab_width">
                                            <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                                <span class="step active"> المستأجر</span>
                                            </div>
                                            <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                                <span class="step"> السيارة</span>
                                            </div>
                                            <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                                <span class="step">السائق</span>
                                            </div>
                                            <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                                <span class="step"> السائق الإضافي</span>
                                            </div>
                                            <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                                <span class="step"> الخيارات</span>
                                            </div>
                                            <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                                <span class="step"> الإضافات</span>
                                            </div>
                                            <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                                <span class="step"> الفحص الظاهري</span>
                                            </div>
                                            <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                                <span class="step">الدفع</span>
                                            </div>
                                        </div>
                                        <div class="" style="">
                                            @Html.AntiForgeryToken()

                                            <input type="text" id="serialNo" name="serialNo" hidden>
                                            @Html.HiddenFor(Model => Model.CR_Cas_Contract_Basic_Sector)

                                            <input type="text" id="MsgCode" name="MsgCode" class="form-control" hidden>
                                            <input type="text" id="RenterNationality" name="RenterNationality" class="form-control" hidden>
                                            <input type="text" id="RenterGender" name="RenterGender" class="form-control" hidden>
                                            <input type="text" id="RenterEmployer" name="RenterEmployer" class="form-control" hidden>
                                            <input type="text" id="RenterJob" name="RenterJob" class="form-control" hidden>
                                            <input type="text" id="RenterAge" name="RenterAge" class="form-control" hidden>
                                            <input type="text" id="Expiry_Driving_License_Date" class="form-control" hidden />
                                            <input type="text" id="NationalityCode" name="NationalityCode" class="form-control" hidden>
                                            <input type="text" id="GenderCode" name="GenderCode" class="form-control" hidden>
                                            <input type="text" id="JobsCode" name="JobsCode" class="form-control" hidden>
                                            <input type="text" id="SocialCode" name="SocialCode" class="form-control" hidden>
                                            <input type="text" id="QualificationCode" name="QualificationCode" class="form-control" hidden>
                                            <input type="text" id="EmployerCode" name="EmployerCode" class="form-control" hidden>
                                            <input type="text" id="RegionCode" name="RegionCode" class="form-control" hidden>
                                            <input type="text" id="CityCode" name="CityCode" class="form-control" hidden>
                                            <input type="text" id="MinAge" name="MinAge" class="form-control" hidden>
                                            <input type="text" id="MaxAge" name="MaxAge" class="form-control" hidden>
                                            <input type="text" id="InternalAuthValue" name="InternalAuthValue" class="form-control" hidden>
                                            <input type="text" id="ExternalAuthValue" name="ExternalAuthValue" class="form-control" hidden>
                                            <input type="text" id="PassRenter" name="PassRenter" class="form-control" hidden>
                                            <input type="text" class="form-control" id="HiddenRenterName" name="HiddenRenterName" hidden>
                                            <input type="text" class="form-control" id="HiddenRenterAddress" name="HiddenRenterAddress" hidden>
                                            <input type="text" class="form-control" id="HiddenRenterEmail" name="HiddenRenterEmail" hidden>



                                            <input type="text" class="form-control" id="DriverAge" name="DriverAge" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverName" name="HiddenDriverName" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverAddress" name="HiddenDriverAddress" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverEmail" name="HiddenDriverEmail" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverJob" name="HiddenDriverJob" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverEmployer" name="HiddenDriverEmployer" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverNationality" name="HiddenDriverNationality" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverGender" name="HiddenDriverGender" hidden>
                                            <input type="text" class="form-control" id="HiddenDriverIdError" name="HiddenDriverIdError" hidden>
                                            <input type="text" class="form-control" id="HiddenDrivingLicenceError" name="HiddenDrivingLicenceError" hidden>



                                            <input type="text" id="AdditionalDriverAge" name="AdditionalDriverAge" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverName" name="HiddenAdditionalDriverName" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverEmail" name="HiddenAdditionalDriverEmail" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverAddress" name="HiddenAdditionalDriverAddress" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverEmployer" name="HiddenAdditionalDriverEmployer" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverNationality" name="HiddenAdditionalDriverNationality" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverGender" name="HiddenAdditionalDriverGender" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriver_Driving_License_Date" name="HiddenAdditionalDriver_Driving_License_Date" class="form-control" hidden>
                                            <input type="text" id="HiddenDrivingLicenceError" name="HiddenDrivingLicenceError" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverIdError" name="HiddenAdditionalDriverIdError" class="form-control" hidden>
                                            <input type="text" id="HiddenAdditionalDriverJob" name="HiddenAdditionalDriverJob" class="form-control" hidden>





                                            <fieldset class="fildest51">
                                                <div class="row text-center">

                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">


                                                            <label class="col-md-4 col-form-label" for="userName3">رقم الهوية</label>
                                                            <div class="col-md-6">

                                                                @Html.TextBoxFor(model => model.CR_Cas_Contract_Basic_Renter_Id, htmlAttributes: new { @class = "form-control ", style = "float:right;width:100%", oninput = "this.value=this.value.replace(/[^0-9]/g,'')", autocomplete = "off", maxlength = "10" })
                                                                <div id="textErr"><span id="RenterIdError"></span></div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-5 col-form-label flex-grow-0" for="confirm3">تاريخ الميلاد</label>
                                                            <div class="col-lg-6 col-md-7">
                                                                @*<input class="form-control text-box single-line" data-val="true" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date."
                                                                    id="d" name="d" type="date" value="@ViewBag.ContractDate" style="width:100%" onchange="CheckRenterBirthDate()">*@

                                                                <input class="form-control text-box single-line" data-val="true" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date." id="d" name="d" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractDate" style="width:100%" onblur="affich_btn_1($event)">
                                                                <input type="button" class="hijri-date-input2" id="date_btn1" onblur="affich_affich_1(event)" />
                                                                <div id="textErr"><span id="BirthDateError"></span></div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4 col-form-label" for="userName3"> رقم الجوال</label>
                                                            <div class="col-lg-6 col-md-6">
                                                                <input type="text" autocomplete="no" name="RenterMobile" id="RenterMobile" minlength="12" maxlength="12" required="" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onfocusout="CheckRenterMobile(this.value)" class="form-control" style="float:right;width:100%" value='9665' />
                                                                <div id="textErr"><span id="RenterMobileErr"></span></div>
                                                            </div>
                                                            <button id="SendMessage" class="col-md-2 " type="button" style="height: 30px; background: #0288C7; border:none;color:#fff; "><i class="fa fa-envelope"></i></button>

                                                        </div>
                                                    </div>


                                                    <div class="col-lg-4 col-md-8 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-4">
                                                            <label class="col-md-4 col-form-label" for="RenterEmail" style="padding-right:0"> البريد الالكتروني</label>
                                                            <div class="col-md-8">
                                                                <input type="text" name="RenterEmail" id="RenterEmail" autocomplete="no" class="form-control" style="float: right; width: 505px; " readonly />
                                                                <div id="textErr"></div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                    </div>

                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <div class="form-group row mb-3">
                                                            <label class="col-md-4 col-form-label" for="userName3"> المستأجر سائق</label>
                                                            <div class="col-md-2 offset-md-6">

                                                                @*<input type="checkbox" class="form-control" id="RenterIsDriver" name="RenterIsDriver" required>*@
                                                                @Html.CheckBox("CR_Cas_Contract_Basic_is_Renter_Driver", new { @class = "form-control", style = "height:25px;margin-top:4px;" })

                                                            </div>
                                                        </div>
                                                    </div>




                                                    <div class="col-12">

                                                        <div class="form-group row mb-1">
                                                            <label class="col-md-4 col-form-label" for="password3">الإسم</label>
                                                            <div class="col-md-6 offset-md-2">
                                                                <input type="text" id="RenterName" name="RenterName" class="form-control" required readonly>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row mb-1" hidden>
                                                            <label class="col-md-3 col-form-label" for="confirm3">الجنسية</label>
                                                            <div class="col-md-9">
                                                                <input type="text" id="RenterNationality" name="RenterNationality" class="form-control">
                                                            </div>
                                                        </div>



                                                        <div class="form-group row mb-1">
                                                            <label class="col-md-4 col-form-label" for="confirm4">العنوان</label>
                                                            <div class="col-md-6 offset-md-4">
                                                                <textarea style="resize: none;" rows="2" type="text" id="Address" name="Address" class="form-control" required readonly></textarea>
                                                            </div>
                                                        </div>

                                                    </div> <!-- end col -->


                                                    <div class="col-12">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-md-4 col-form-label" for="confirm4">ملاحظات</label>
                                                            <div class="col-md-6 offset-md-4">
                                                                <textarea style="resize: none;" maxlength="100" rows="2" type="text" id="RenterReason" name="RenterReason" class="form-control"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div> <!-- end row -->


                                                <div tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="RenterModal" style="margin-top:17%;" class="modal hide" data-backdrop="static" data-keyboard="false">
                                                    <div class="modal-dialog modal-m">
                                                        <div class="modal-content">
                                                            <div class="modal-body" style="padding: 35px;">
                                                                <div style="width:75%;float:right;text-align:right;">
                                                                    <b style="color:red;" class="modal-title" id="RenterCodeModal">الرجاء إدخال رمز التحقق</b>
                                                                    <input type="text" id="Renter_code" class="form-control" style="width:150px" />
                                                                    <div id="timer" dir="ltr" class="mt-2">
                                                                        <span id="mins">00:</span>
                                                                        <span id="seconds">00</span>
                                                                        <span dir="ltr">: رمز الرسالة تنتهي صلاحيته بعد</span>
                                                                    </div>
                                                                </div>
                                                                <div style="width:20%;margin-right:5%;float:right;">
                                                                    <input type="button" onclick="ValidRenterModal();" id="modal-btn-si" value="تأكيد" name="hold" class="btn btn-primary waves-effect" style="float:left;" />
                                                                    <input type="button" onclick="CancelRenterModal();" id="CancelRModal" value="الغاء الأمر" class="btn btn-primary waves-effect" style="float:left;margin-top:25px;" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </fieldset>

                                        </div>

                                    </div>

                                </div>

                                <div class="tab" id="thirdForm">
                                    <!-- Circles which indicates the steps of the form: -->

                                    <div id="CarList">
                                        @{
                                            Html.RenderAction("CarsList");
                                        }

                                    </div>
                                </div>

                                <div class="tab" id="profileForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step"> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step active">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step"> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step"> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step"> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <div>
                                        <fieldset class="fildest51" style="min-height:52vh;overflow-y:hidden">

                                            <div class="row">
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">

                                                        <label class="col-md-4 col-form-label" for="input1">رقم الهوية </label>
                                                        <div class="col-md-6 offset-md-2">
                                                            @Html.TextBoxFor(model => model.CR_Cas_Contract_Basic_Driver_Id, htmlAttributes: new { @class = "form-control ", style = "float:right;width:100%", autocomplete = "off", oninput = "this.value=this.value.replace(/[^0-9]/g,'')", maxlength = "10" })

                                                            <div id="textErr"><span id="DriverIdError"></span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-4 col-form-label" for="age">تاريخ الميلاد </label>
                                                        <div class="col-md-6 offset-md-2">
                                                            @*<input type="text" class="form-control" id="DriverBirthDate" name="DriverBirthDate" readonly>*@


                                                            @*<input class="form-control text-box single-line" onchange="CheckDriverBirthDate();" data-val="true" id="DriverBirthDate" name="DriverBirthDate" type="date" value="@ViewBag.ContractDate" style="width:100%">*@

                                                            @*<input class="form-control text-box single-line" data-val="true" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date." id="DriverBirthDate" name="DriverBirthDate" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractDate" style="width:100%" onblur="affich_btn_2($event)">
                                                                <input type="button" class="hijri-date-input2" id="date_btn2" onblur="affich_affich_2(event)"  />*@
                                                            <input class="form-control text-box single-line" data-val="true" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date." id="DriverBirthDate" name="DriverBirthDate" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractDate" style="width:100%" onblur="affich_btn_2($event)">
                                                            <input type="button" class="hijri-date-input2" id="date_btn2" onblur="affich_affich_1(event)" />
                                                            <div id="textErr"><span id="DriverBirthDateErr"></span></div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-4 col-form-label" for="userName3"> رقم الجوال</label>
                                                        <div class="col-lg-6 col-md-6">

                                                            <input type="tel" name="Driver_Mobile" id="Driver_Mobile" autocomplete="no" minlength="12" maxlength="12" required="" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onfocusout="CheckDriverMobile(this.value);" class="form-control" style="float:right;width:100%" value='9665' />
                                                            <div id="textErr"><span id="DriverMobileErr"></span></div>
                                                        </div>
                                                        <button id="SendMessageDriver" class="col-md-2 " type="button" style="height: 30px; background: #0288C7; border:none;color:#fff; "><i class="fa fa-envelope"></i></button>


                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-4">
                                                        <label class="col-md-4 col-form-label" for="userName3" style="padding-left:0"> البريد الالكتروني</label>
                                                        <div class="col-md-6">
                                                            <input type="text" name="Driver_Email" id="Driver_Email" autocomplete="no" class="form-control" style="float: right; width: 510px;" readonly="readonly" />
                                                            <div><span id="textErr"></span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                </div>

                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-4 col-form-label" for="confirm3" id="lblAdditionalDriver">سائق إضافي</label>
                                                        <div class="col-md-2">
                                                            @Html.CheckBox("CR_Cas_Contract_Basic_is_Additional_Driver", new { @class = "form-control", style = "height:25px;margin-top:4px;", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="name"> الإسم </label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" id="DriverName" name="DriverName" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="input3">الجنسية</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" id="DriverNationality" name="DriverNationality" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="Gender">الجنس</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" class="form-control" id="DriverGender" name="DriverGender" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="Job">المهنة </label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" class="form-control" id="DriverJob" name="DriverJob" readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="input3">نوع الرخصة</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" id="" name="" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="Gender">تاريخها</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" class="form-control" id="" name="" readonly>
                                                        </div>
                                                        <div><span id="textErr"><span id="DrivingLicenceError" style="color:red;font-size:12px;margin-right:112px;"></span></span></div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="Job">نهايتها</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" class="form-control" id="CR_Mas_Renter_Information_Expiry_Driving_License_Date" name="CR_Mas_Renter_Information_Expiry_Driving_License_Date" readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="employer">جهة العمل</label>
                                                        <div class="col-md-6 offset-md-2">
                                                            <input type="text" id="DriverEmployer" name="DriverEmployer" class="form-control" required readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="confirm3">العنوان</label>
                                                        <div class="col-md-10">
                                                            <textarea style="resize: none;" rows="1" id="DriverAddress" name="DriverAddress" class="form-control" readonly></textarea>
                                                        </div>
                                                    </div>
                                                </div> <!-- end col -->
                                                <div class="col-12">
                                                    <div class="form-group row mb-1">
                                                        <label class="col-md-4 col-form-label" for="confirm4">ملاحظات</label>
                                                        <div class="col-md-10">
                                                            <textarea style="resize: none;" rows="1" type="text" id="DriverReason" name="DriverReason" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div> <!-- end row -->


                                            <div tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="DriverModal" style="margin-top:17%;" class="modal fade">
                                                <div class="modal-dialog modal-m">
                                                    <div class="modal-content">
                                                        <div class="modal-body" style="padding: 35px;">
                                                            <div style="width:75%;float:right;text-align:right;">
                                                                <b style="color:red;" class="modal-title" id="RenterCodeModal">الرجاء إدخال رمز التحقق</b>
                                                                <input type="text" id="Driver_code" class="form-control" style="width:150px" />
                                                                <div id="timer" dir="ltr" class="mt-2">
                                                                    <span id="Drivermins">00:</span>
                                                                    <span id="Driverseconds">00</span>
                                                                    <span dir="ltr">: رمز الرسالة تنتهي صلاحيته بعد</span>
                                                                </div>
                                                            </div>
                                                            <div style="width:20%;margin-right:5%;float:right;">
                                                                <input type="button" onclick="ValidDriverModal();" id="modal-btn-si" value="تأكيد" name="hold" class="btn btn-primary waves-effect" style="float:left;" />
                                                                <input type="button" onclick="CancelDriverModal();" id="CancelRModal" value="الغاء الأمر" class="btn btn-primary waves-effect" style="float:left;margin-top:25px;" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>


                                <div class="tab" id="AdditionalDriverForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step "> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step active"> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step"> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step"> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>

                                    <fieldset class="fildest51" style="min-height: 52vh; overflow-y: hidden">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-3">
                                                    <label class="col-md-4 col-form-label" for="input1">رقم الهوية </label>
                                                    <div class="col-md-6 offset-md-2">
                                                        @Html.TextBoxFor(model => model.CR_Cas_Contract_Basic_Additional_Driver_Id, htmlAttributes: new { @class = "form-control ", style = "float:right;width:100%", autocomplete = "off", oninput = "this.value=this.value.replace(/[^0-9]/g,'')", maxlength = "10" })

                                                        <div id="textErr"><span id="AdditionalDriverIdError"></span></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-3">
                                                    <label class="col-md-4 col-form-label" for="age">تاريخ الميلاد </label>
                                                    <div class="col-md-6 offset-md-2">
                                                        @*<input type="text" class="form-control" id="AdditionalDriverBirthDate" name="AdditionalDriverBirthDate" readonly>*@
                                                        @*<input class="form-control text-box single-line" onchange="CheckAddDriverBirthDate()" data-val="true" id="AdditionalDriverBirthDate" name="AdditionalDriverBirthDate" type="date" value="@ViewBag.ContractDate" style="width:100%">*@

                                                        <input class="form-control text-box single-line" data-val="true" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date." id="AdditionalDriverBirthDate" name="AdditionalDriverBirthDate" data-inputmask="'alias': 'yyyy/mm/dd'" value="@ViewBag.ContractDate" style="width:100%" onblur="affich_btn_3(event)">
                                                        <input type="button" class="hijri-date-input2" id="date_btn3" onblur="affich_affich_3(event)" />

                                                        <div id="textErr"><span id="AddDriverBirthDateError"></span></div>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-3">
                                                    <label class="col-md-4 col-form-label" for="userName3"> رقم الجوال</label>
                                                    <div class="col-lg-6 col-md-6">

                                                        <input type="tel" name="Additional_Driver_Mobile" id="Additional_Driver_Mobile" autocomplete="no" minlength="12" maxlength="12" required="" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onfocusout="CheckAddDriverMobile(this.value)" class="form-control" style="float:right;width:100%" value='9665' />
                                                        <div id="textErr"><span id="AdditionalDriverMobileErr"></span></div>
                                                    </div>
                                                    <button id="SendMessageAdditionalDriver" class="col-md-2 " type="button" style="height: 30px; background: #0288C7; border:none;color:#fff; "><i class="fa fa-envelope"></i></button>

                                                </div>
                                            </div>


                                            @*<div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                    <div class="form-group row mb-3">
                                                        <label class="col-md-4 col-form-label" for="confirm3">رمز التحقق</label>
                                                        <div class="col-lg-3 col-md-3">

                                                        </div>
                                                        <a href="#" onclick="GetAdditionalDriverData(13);return false;" class="col-md-2" style="background-color:#0288C7">
                                                            <i class="fa fa-search" aria-hidden="true" style="padding-right:10px;padding-top:10px;color:white;"></i>
                                                        </a>
                                                    </div>
                                                </div>*@

                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-4">
                                                    <label class="col-md-4 col-form-label" for="userName3" style="padding-left: 0"> البريد الالكتروني</label>
                                                    <div class="col-md-6">
                                                        <input type="text" name="Additional_Driver_Email" id="Additional_Driver_Email" autocomplete="no" class="form-control" style="float: right; width: 510px;" readonly />
                                                        <div><span id="textErr"></span></div>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="name"> الإسم</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" id="AdditionalDriverName" name="AdditionalDriverName" class="form-control" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="input3">الجنسية</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" id="AdditionalDriverNationality" name="AdditionalDriverNationality" class="form-control" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="Gender">الجنس</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" class="form-control" id="AdditionalDriverGender" name="AdditionalDriverGender" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="Job">المهنة </label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" class="form-control" id="AdditionalDriverJob" name="AdditionalDriverJob" readonly>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="input3">نوع الرخصة</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" id="" name="" class="form-control" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="Gender">تاريخها</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" class="form-control" id="" name="" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="Job">نهايتها </label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" class="form-control" id="AdditionalDriver_Driving_License_Date" name="AdditionalDriver_Driving_License_Date" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="employer">جهة العمل</label>
                                                    <div class="col-md-6 offset-md-2">
                                                        <input type="text" id="AdditionalDriverEmployer" name="AdditionalDriverEmployer" class="form-control" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="confirm3">العنوان </label>
                                                    <div class="col-md-10">
                                                        <textarea style="resize: none;" rows="1" id="AdditionalDriverAddress" name="AdditionalDriverAddress" class="form-control" readonly></textarea>
                                                    </div>
                                                </div>
                                            </div> <!-- end col -->
                                            <div class="col-12">
                                                <div class="form-group row mb-1">
                                                    <label class="col-md-4 col-form-label" for="confirm4">ملاحظات</label>
                                                    <div class="col-md-10">
                                                        <textarea style="resize: none;" rows="1" type="text" id="AdditionalDriverReason" name="AdditionalDriverReason" class="form-control"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> <!-- end row -->

                                        <div tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="AddDriverModal" style="margin-top:17%;" class="modal fade" data-backdrop="static" data-keyboard="false">
                                            <div class="modal-dialog modal-m">
                                                <div class="modal-content">
                                                    <div class="modal-body" style="padding: 35px;">
                                                        <div style="width:75%;float:right;text-align:right;">
                                                            <b class="modal-title" style="color:red;" id="AddDriverCodeModal">الرجاء إدخال رمز التحقق</b>
                                                            <input type="text" id="Additional_Driver_code" class="form-control" autocomplete="off" style="width:150px" />
                                                            <div id="timer" dir="ltr" class="mt-2">
                                                                <span id="AddDrivermins">00:</span>
                                                                <span id="AddDriverseconds">00</span>
                                                                <span dir="ltr">: رمز الرسالة تنتهي صلاحيته بعد</span>
                                                            </div>
                                                        </div>
                                                        <div style="width:20%;margin-right:5%;float:right;">
                                                            <input type="button" onclick="ValidAddDriverModal();" id="AddDriverSI" value="تأكيد" name="hold" class="btn btn-primary waves-effect" style="float:left;" />
                                                            <input type="button" onclick="CancelAddDriverModal();" id="AddDriverSI" value="الغاء الأمر" class="btn btn-primary waves-effect" style="float:left;margin-top:25px;" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="tab" id="fourForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step "> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step "> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step active"> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step"> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <fieldset class="fildest51" style="min-height: 52vh; overflow-y: hidden">
                                        <div class="row">
                                            <div class="col-12">
                                                <div id="ChoicesList">
                                                    @{
                                                        Html.RenderAction("ChoicesList");
                                                    }
                                                </div>
                                            </div>
                                            <!-- end col -->
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="tab" id="fiveForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step "> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step "> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step "> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step active"> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <fieldset class="fildest51" style="min-height: 52vh; overflow-y: hidden">
                                        <div class="row">
                                            <div class="col-12">
                                                <div id="AdditionalList">
                                                    @{
                                                        Html.RenderAction("AdditionalList");

                                                    }

                                                </div>
                                            </div>
                                            <!-- end col -->
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="tab" id="sixForm">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step "> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step "> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step "> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step "> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step active"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step">الدفع</span>
                                        </div>
                                    </div>
                                    <fieldset class="fildest51">
                                        <div id="VirtuelInspection">
                                            @{
                                                Html.RenderAction("VirtuelInspection");

                                            }

                                        </div>
                                    </fieldset>
                                </div>
                                <div class="tab" id="eight">
                                    <!-- Circles which indicates the steps of the form: -->
                                    <div class="row tab_width">
                                        <div class="tab_price first" id="firstli" data-target-form="#accountForm" style="z-index:8">
                                            <span class="step"> المستأجر</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#thirdForm" style="z-index:7">
                                            <span class="step "> السيارة</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#profileForm" style="z-index:6">
                                            <span class="step">السائق</span>
                                        </div>
                                        <div class="tab_price" id="thirdli" data-target-form="#AdditionalDriverForm" style="z-index:5">
                                            <span class="step "> السائق الإضافي</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fourForm" style="z-index:4">
                                            <span class="step "> الخيارات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#fiveForm" style="z-index:3">
                                            <span class="step "> الإضافات</span>
                                        </div>
                                        <div class="tab_price" data-target-form="#sixForm" style="z-index:2">
                                            <span class="step"> الفحص الظاهري</span>
                                        </div>
                                        <div class="tab_price last" data-target-form="#sevenForm" style="z-index:1">
                                            <span class="step active">الدفع</span>
                                        </div>
                                    </div>
                                    <fieldset class="fildest51">
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="text-center last_tab">

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> رقم العقد </label>
                                                                    <div class="col-md-8 input6">
                                                                        @Html.TextBoxFor(Model => Model.CR_Cas_Contract_Basic_No, new { @class = "form-control", style = "float:right;", @readonly = "readonly" })
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> تاريخ العقد </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input class="form-control text-box single-line" data-val="true" placeholder="yyyy/MM/dd"
                                                                               data-val-date="The field CR_Cas_Contract_Basic_Date must be a date." id="CR_Cas_Contract_Basic_Date"
                                                                               name="CR_Cas_Contract_Basic_Date" value="@ViewBag.ContractDate" style="text-align:right!important" data-inputmask="'alias': 'yyyy/mm/dd'" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12" hidden>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> التوقيت </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="time" class="form-control" id="CR_Cas_Contract_Basic_Time" name="CR_Cas_Contract_Basic_Time" value="">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> عدد الأيام </label>
                                                                    <div class="col-md-8 input6">
                                                                        @Html.TextBoxFor(Model => Model.CR_Cas_Contract_Basic_Expected_Rental_Days, new { @class = "form-control", style = "float:right; width: 60px;", @type = "text", oninput = "this.value=this.value.replace(/[^0-9]/g,'')", onfocusout = "CalculateContract()", maxlength = "3", @value = "0" })
                                                                    </div>
                                                                    <div id="textErr"><span id="jourerror" class="texterr"></span></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> تاريخ نهايته </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input class="form-control text-box single-line" data-val="true"
                                                                               data-val-date="The field CR_Cas_Contract_Basic_Expected_End_Date must be a date."
                                                                               id="CR_Cas_Contract_Basic_Expected_End_Date"
                                                                               name="CR_Cas_Contract_Basic_Expected_End_Date" value="@ViewBag.ContractDate" style="text-align:right!important" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> سعر الإيجار </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="Price" name="Price" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> مجموع الخيارات </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="ChoicesTotal" name="ChoicesTotal" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> مجموع الإضافات </label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="AdditionalTotal" name="AdditionalTotal" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> تفويض خارجي </label>
                                                                    <div class="col-md-2 offset-md-6 input6">
                                                                        <input type="checkbox" class="form-control" id="ExAuth" name="ExAuth" style=" float: right; height: 25px;margin-top:5px;margin-right: -6px;">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> السائق الإضافي</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="ValueAdditionalDriver" name="ValueAdditionalDriver" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> قيمة العقد</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="TotalContract" name="TotalContract" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> نسبة الخصم</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" style="width: 60px;" id="ContractDiscount" name="ContractDiscount" value="0">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> الساعات الإضافية</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" style="width: 100px;" id="CR_Cas_Contract_Basic_Free_Additional_Hours" name="CR_Cas_Contract_Basic_Free_Additional_Hours" maxlength="3" value="0">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>



                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12" hidden>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> قيمة الخصم</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="CR_Cas_Contract_Basic_Discount_Value" name="CR_Cas_Contract_Basic_Discount_Value" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> الكيلوات الإضافية</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" style="width: 100px;" id="CR_Cas_Contract_Basic_Daily_Free_KM" name="CR_Cas_Contract_Basic_Daily_Free_KM" maxlength="3" value="0">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> إجمالي العقد</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="TotalContractHT" name="TotalContractET" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> قيمة الضريبة</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="TotalContractTax" name="TotalContractTax" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> صافي العقد</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" id="TotalContractPrice" name="TotalContractIT" value="0" readonly>
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> رصيد سابق</label>
                                                                    <div class="col-md-8 input6">
                                                                        @*@Html.TextBoxFor(Model => Model.CR_Cas_Contract_Basic_Previous_Balance, new { @class = "form-control", style = "float:right;direction:ltr;text-align: right;", @readonly = "readonly" })*@
                                                                        <input type="text" class="form-control" autocomplete="no" id="CR_Cas_Contract_Basic_Previous_Balance" name="CR_Cas_Contract_Basic_Previous_Balance" style="direction: rtl; width: 100px;" readonly="readonly">

                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> المبلغ المطلوب</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" autocomplete="no" id="TotalToPay" name="TotalToPay" value="0" maxlength="9" style="direction: rtl; width: 100px;" readonly="readonly">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> المبلغ المدفوع</label>
                                                                    <div class="col-md-8 input6">
                                                                        <input type="text" class="form-control" style="width: 100px;" autocomplete="no" id="TotalPayed" name="TotalPayed" value="0" maxlength="9">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> طريقة الدفع</label>
                                                                    <div class="col-md-8 input6">
                                                                        @Html.DropDownList("PayType", null, " --رجاء إختر طريقة الدفع-- ", htmlAttributes: new { @class = "form-control ", style = "float:right;width:180px;border: 1px solid #0288C7 !important", @Disabled = "disabled" })
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label class="col-md-4 label6"> نقطة البيع</label>
                                                                    <div class="col-md-8 input6">
                                                                        @Html.DropDownList("CasherName", new SelectList(""), " --رجاء إختر نقطة البيع-- ", htmlAttributes: new { @class = "form-control ", style = "float:right;border: 1px solid #0288C7 !important", @Disabled = "disabled" })

                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label style="width: 12%; float: right; padding-right: 15px; text-align: right; "> الملاحظات</label>
                                                                    <div style="width: 87%;">
                                                                        <input type="text" class="form-control" id="Reasons" name="Reasons" value="" maxlength="100">
                                                                    </div>
                                                                    <div class="texterr"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <!-- end col -->
                                        </div>
                                        <div tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="AuthModal" style="margin-top:17%;" class="modal hide" data-backdrop="static" data-keyboard="false">
                                            <div class="modal-dialog modal-sm">
                                                <div class="modal-content">
                                                    <div class="modal-header">

                                                        <h4 class="modal-title" id="AddDriverCodeModal" style=" margin-right: 10%;color:red;">الرجاء إدخال رمز التحقق</h4>
                                                        <input type="text" class="form-control" id="AuthNo" name="AuthNo" value="" autocomplete="off" required>
                                                        <div id="timer" dir="ltr">

                                                            <span id="Authmins">00:</span>
                                                            <span id="Authseconds">00</span>
                                                            <span dir="ltr">رمز الرسالة تنتهي صلاحيته بعد</span>


                                                        </div>

                                                    </div>
                                                    <div class="modal-footer">
                                                        <input type="button" onclick="ValidModalAuth()" id="AuthSI" value="تأكيد" class="btn btn-primary" style=" position: relative; right: auto; color:white;background-color:#5cb85c;float: right; width: 80px; height: 40px; font: bold 14px Tahoma">
                                                        <input type="button" onclick="CancelModalAuth()" id="AuthCancel" value="الغاء الأمر" class="btn btn-primary" style=" position: relative; right: auto; color:white;background-color:#5cb85c;float: left; width: 80px; height: 40px; font: bold 14px Tahoma">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>

                            </div>

                        </div>
                        <fieldset>
                            <div class="list-inline wizard mb-0">
                                <a href="/BranchHome/branchstat" class="btn btn-secondary text-white" style="float: right; margin-left: 20px; display: inline;">انهاء</a>
                                <button type="button" id="prevBtn" onclick="PrevPrev(-1)" class="btn btn-secondary" style="float: right; margin-left: 20px;">السابق</button>
                                <button type="button" id="nextBtn" onclick="nextPrev(1)" class="btn btn-secondary" style="float: left; margin-left: 20px;">التالي</button>
                                <input type="submit" name="add" class="btn btn-secondary" id="add_btn" value="حفظ" style="display: none;float: left; margin-left: 20px;"/>
                                <input type="button" name="AuthBtn" class="btn btn-secondary" id="AuthBtn" value="الموحد" style="display: none;float: left; margin-left: 20px;" hidden />
                                <button type="button" name="AuthBtn2" class="btn btn-secondary" id="AuthBtn2" style="display: none;float: left; margin-left: 20px;">التفويض</button>
                                <button type="button" name="RenterSignature" class="btn btn-secondary" id="AuthNoBtn" style="display: none;float: left; margin-left: 20px;">توقيع المستأجر</button>
                                @*<input type="button" name="RenterSignature" class="btn btn-secondary" id="AuthNoBtn" value=" توقيع المستأجر" style="display: none;float: left; margin-left: 20px;" />*@
                                @*<input name="RenterSignatureImg" type="file" class="form-control " style="display: block ; width:200px; float: right; object-fit: fill;" accept="image/*" id="file" onchange="loadRenterSignature(event)">*@

                            </div>
                        </fieldset>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</form>


<script id="rendered-js">
    var input = document.querySelector('#RenterMobile');

    input.addEventListener("keydown", function () {
        var oldVal = this.value;
        console.log(oldVal);
        var field = this;
        console.log("funciona");

        setTimeout(function () {
            if (field.value.indexOf('9665') !== 0) {
                field.value = oldVal;
            }
        }, 1);
    });
    var input2 = document.querySelector('#Driver_Mobile');

    input2.addEventListener("keydown", function () {
        var oldVal2 = this.value;
        console.log(oldVal2);
        var field2 = this;
        console.log("funciona");

        setTimeout(function () {
            if (field2.value.indexOf('9665') !== 0) {
                field2.value = oldVal2;
            }
        }, 1);
    });
    var input3 = document.querySelector('#Additional_Driver_Mobile');

    input3.addEventListener("keydown", function () {
        var oldVal3 = this.value;
        console.log(oldVal3);
        var field3 = this;
        console.log("funciona");

        setTimeout(function () {
            if (field3.value.indexOf('9665') !== 0) {
                field3.value = oldVal3;
            }
        }, 1);
    });
</script>

<script type="text/javascript">

    function affich_affich_1(e) {
        var date = e.target.value;
        document.getElementById("d").value = date;
    }
    function affich_btn_1(e) {
        var date = e.target.value;
        document.getElementById("date_btn1").value = date;
    }

    ///
    function affich_affich_2(e) {
        var date = e.target.value;
        document.getElementById("DriverBirthDate").value = date;
    }
    function affich_btn_2(e) {
        var date = e.target.value;
        document.getElementById("date_btn2").value = date;
    }

    ////
    function affich_affich_3(e) {
        var date = e.target.value;
        document.getElementById("AdditionalDriverBirthDate").value = date;
    }
    function affich_btn_3(e) {
        var date = e.target.value;
        document.getElementById("date_btn3").value = date;
    }

</script>

<script type="text/javascript">
    var Auth = false;

    // Restricts input for each element in the set of matched elements to the given inputFilter.
    (function ($) {
        $.fn.inputFilter = function (inputFilter) {
            return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
                if (inputFilter(this.value)) {
                    this.oldValue = this.value;
                    this.oldSelectionStart = this.selectionStart;
                    this.oldSelectionEnd = this.selectionEnd;
                } else if (this.hasOwnProperty("oldValue")) {
                    this.value = this.oldValue;
                    this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                } else {
                    this.value = "";
                }
            });
        };
    }(jQuery));

    // Install input filters.
    $("#inputinteger").inputFilter(function (value) { return /^\d*$/.test(value) && (value === "" || parseInt(value) <= 100000); });
    $("#ContractDiscount").inputFilter(function (value) { return /^-?\d*[.]?\d{0,2}$/.test(value) && (value === "" || parseInt(value) <= 100); });
    $("#TotalPayed").inputFilter(function (value) { return /^-?\d*[.]?\d{0,2}$/.test(value) && (value === "" || parseInt(value) <= 1000000); });

</script>
<script>
    function validateFloatKey(ele, ev) {
        var errMsg = document.getElementById('errMsg'),
            val = ele.value,
            success = false;
        regEx = /^\d*\.?\d{0, 2}$/;
        if (regEx.test(ele.value)) {
            errMsg.style.display = 'none';
            ele.parentNode.classList.remove('error');
            console.log(ele.value);
            success = true;
        } else {
            ele.parentNode.classList.add('error');
            errMsg.style.display = 'block';
        }
        return success;
    }
</script>
<script>
    function validateFloatKeypourcent(ele, ev) {
        var errMsg = document.getElementById('errMsg'),
            val = ele.value,
            success = false;
        regEx = /^\d*\.?\d{0,2}$/;
        if (regEx.test(ele.value)) {
            errMsg.style.display = 'none';
            ele.parentNode.classList.remove('error');
            console.log(ele.value);
            success = true;
        } else {
            if (ele.value > 100) {
                ele.parentNode.classList.add('error');
                errMsg.style.display = 'block';
            }
        }
        return success;
    }
</script>


<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the current tab

    function showTab(n) {

        // This function will display the specified tab of the form...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        //... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == 2) {
            $("#CR_Cas_Contract_Basic_Driver_Id").focus();
        } else if (n == 3) {
            $("#CR_Cas_Contract_Basic_Additional_Driver_Id").focus();
        }
        if (n == (x.length - 1)) {
            //document.getElementById("nextBtn").innerHTML = "حفظ";
            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("add_btn").style.display = "inline";
            document.getElementById("AuthBtn").style.display = "inline";
            document.getElementById("AuthNoBtn").style.display = "inline";
            document.getElementById("AuthBtn2").style.display = "inline";
        } else {
            document.getElementById("add_btn").style.display = "none";
            document.getElementById("nextBtn").style.display = "inline";
            document.getElementById("nextBtn").innerHTML = "التالي";
            document.getElementById("AuthBtn").style.display = "none";
            document.getElementById("AuthNoBtn").style.display = "none";
            document.getElementById("AuthBtn2").style.display = "none";
        }
        //... and run a function that will display the correct step indicator:
        //fixStepIndicator(n)
    }

    function nextPrev(n) {
        //alert();
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) {
            console.log("1");
            return false;
        }
        // Hide the current tab:
        x[currentTab].style.display = "none";

        //if (n >= 1) {
        //    document.getElementById("CR_Cas_Car_Price_Basic_Model_Code").style("Hidden");
        //}
        // Increase or decrease the current tab by 1:
        if (currentTab == 0) {
            NextRenter();
            console.log("1")
        }
        if (currentTab == 1) {
            if (CheckSelectedCars() && CheckRenterAge()) {
                currentTab = currentTab + n;
                console.log("2")

            }
        }
        //if (currentTab == 2 && validateFormDriver) {
        //    console.log("aaaaa");
        //    return false;
        //}
        else if (currentTab == 2) {

            var checkBox2 = document.getElementById("CR_Cas_Contract_Basic_is_Additional_Driver");
            var Driver_Id = document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value;
            var DriverName = document.getElementById('DriverName').value;
            var RMobile = document.getElementById('Driver_Mobile').value;
            if (CheckDriverAge) {
                if (Driver_Id && DriverName) {
                    if ((checkBox2.checked == true)) {
                        currentTab = currentTab + n;
                        console.log(currentTab)
                    } else if (CheckChoicesListNo()) {
                        currentTab = currentTab + n + 1;
                    } else if (CheckAdditionalListNo()) {
                        currentTab = currentTab + n + 2;
                    } else { currentTab = currentTab + n + 3; }
                }
                else {
                    toastr.error("عفوا الرجاء التحقق من الهوية");
                }
            }

        } else if (currentTab == 3) {
            var Additional_Driver_Id = document.getElementById('CR_Cas_Contract_Basic_Additional_Driver_Id').value;
            var AdditionalDriverName = document.getElementById('AdditionalDriverName').value;
            if (CheckAdditionalDriverAge) {
                if (Additional_Driver_Id && AdditionalDriverName) {
                    if (CheckChoicesListNo()) {
                        currentTab = currentTab + n;
                    } else if (CheckAdditionalListNo()) {
                        currentTab = currentTab + n + 1;
                    } else { currentTab = currentTab + n + 2; }
                }
                else {
                    toastr.error("عفوا الرجاء التحقق من الهوية");
                }
            }
        } else if (currentTab == 4) {
            if (CheckAdditionalListNo()) {
                currentTab = currentTab + n;
            } else { currentTab = currentTab + n + 1; }

        } else if (currentTab == 6) {
            console.log(CheckInspection())

            if (CheckInspection() == true) {
                RazContractInfo();
                var m = 0;
                var ig1 = $('img#img1').attr('src');
                var ig2 = $('img#img2').attr('src');
                var ig3 = $('img#img3').attr('src');
                var ig4 = $('img#img4').attr('src');
                var ig5 = $('img#img5').attr('src');
                var ig6 = $('img#img6').attr('src');
                var ig7 = $('img#img7').attr('src');
                var ig8 = $('img#img8').attr('src');
                var ig9 = $('img#img9').attr('src');
                if (ig1) m = m + 1;
                if (ig2) m = m + 1;
                if (ig3) m = m + 1;
                if (ig4) m = m + 1;
                if (ig5) m = m + 1;
                if (ig6) m = m + 1;
                if (ig7) m = m + 1;
                if (ig8) m = m + 1;
                if (ig9) m = m + 1;
                if (m < 3)
                    toastr.info("الرجاء ادخال ثلاث صور علي الأقل");
                else
                    currentTab = currentTab + n;
                    getBalanceRenter();



            }
            else {
                toastr.info("الرجاء اكمال الفحص الضاهري");

            }

        } else {

            currentTab = currentTab + n;
            getBalanceRenter();

        }


        // if you have reached the end of the form...
        if (currentTab >= x.length) {
            // ... the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
    }
    function PrevPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";

        //if (n >= 1) {
        //    document.getElementById("CR_Cas_Car_Price_Basic_Model_Code").style("Hidden");
        //}
        // Increase or decrease the current tab by 1:

        if (currentTab == 4) {
            var checkBox1 = document.getElementById("CR_Cas_Contract_Basic_is_Renter_Driver");
            var checkBox2 = document.getElementById("CR_Cas_Contract_Basic_is_Additional_Driver");
            if (checkBox1.checked == false) {
                currentTab = currentTab + n - 2;
            } else {
                if (checkBox2.checked == true) {
                    currentTab = currentTab + n;
                } else {
                    currentTab = currentTab + n - 1;
                }
            }

        } else if (currentTab == 6) {
            var checkBox2 = document.getElementById("CR_Cas_Contract_Basic_is_Additional_Driver");
            if ((!CheckChoicesListNo()) && (!CheckAdditionalListNo()) && (checkBox2.checked == false)) {
                currentTab = currentTab + n - 3;
            } else if ((!CheckChoicesListNo()) && (!CheckAdditionalListNo()) && (checkBox2.checked == true)) {
                currentTab = currentTab + n - 2;
            } else if (!CheckAdditionalListNo()) { currentTab = currentTab + n - 1; }
            else { currentTab = currentTab + n; }
        } else {
            currentTab = currentTab + n;
        }


        // if you have reached the end of the form...
        if (currentTab >= x.length) {
            // ... the form gets submitted:
            document.getElementById("regForm").submit();
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
    }


    function validateForm() {
        var Renter_Id = document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value;
        var name = document.getElementById('RenterName').value;
        if ((Renter_Id.length >= 10) && ((Renter_Id[0] == 1) || (Renter_Id[0] == 2) || (Renter_Id[0] == 7))) {
            valid = true;
            if (name != "") {
                valid = true;
            } else {
                toastr.error("عفوا الرجاء التحقق من الهوية");
                valid = false;
            }
        } else if (Renter_Id.length == 0) {
            document.getElementById('RenterIdError').innerHTML = "الرجاء ادخال هوية المستأجر";
            //toastr.info("الرجاء ادخال هوية المستأجر");
            valid = false;
        } else {
            document.getElementById('RenterIdError').innerHTML = "الرجاء التحقق من صحة الإدخال";
            valid = false;
        }

        var RenterMobile = document.getElementById('RenterMobile').value;
        if ((RenterMobile.length >= 12) && RenterMobile.substring(0, 4) == "9665") {
            valid = true;
            if (name != "") {
                valid = true;
            } else {
                toastr.error("عفوا الرجاء التحقق من الهوية");
                valid = false;
                return;
            }
        } else if (RenterMobile.length == 0) {
            document.getElementById('RenterMobileErr').innerHTML = "الرجاء ادخال رقم الجوال";
            valid = false;
            return;
        } else {
            document.getElementById('RenterMobileErr').innerHTML = "الرجاء التحقق من صحة رقم الجوال";
            valid = false;
            return;
        }



        /////Delete cause we need this check in an other place////
        //if (CheckCarsListNo()) {
        //    valid = true;
        //} else {
        //    toastr.info("عفوا لا يوجد سيارات للتأجير أو لم يتم تسعيير السيارات");
        //    valid = false;
        //}

        /*****amir travail****/
        //valid = true;
        //If the valid status is true, mark the step as finished and valid:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
    }




</script>

<script>
    function CheckRenterBirthDate() {
        var q = new Date();
        var date = new Date(q.getFullYear(), q.getMonth(), q.getDate());
        var mydate = new Date(document.getElementById('d').value);

        if (date < mydate) {
            document.getElementById('BirthDateError').innerHTML = "الرجاء التأكد من التاريخ المدخل";
        } else {
            document.getElementById('BirthDateError').innerHTML = "";
        }

    }

    function CheckRenterMobile(v) {
        var mobile = v;
        if (mobile[0] == 9 && mobile[1] == 6 && mobile[2] == 6 && mobile[3] == 5 && mobile.length == 12) {
            document.getElementById('RenterMobileErr').innerHTML = "";
        } else {
            document.getElementById('RenterMobileErr').innerHTML = "الرجاء التأكد من رقم الجوال";
        }
    }


</script>



<script>

    function getCustomerInfo(k) {

        var ContractNo = $("#CR_Cas_Contract_Basic_No").val();
        var RMobile = $("#RenterMobile").val();
        var err = $("#RenterIdError").text();
        var Id = $("#CR_Cas_Contract_Basic_Renter_Id").val();
        if (Id == "") {
            err = "الرجاء إدخال الهوية";
            return;
        }

        if (RMobile == "") {
            $("#RenterMobileErr").text("الرجاء إدخال رقم الجوال");
            return;
        }
        if ((k === 13 && err === "" && RMobile != "") || (k === 9 && err === "" && RMobile != "")) {

            //var REmail = $("#RenterEmail").val();
            //alert();
            var LessorCode = '@Request.RequestContext.HttpContext.Session["LessorCode"]';
            // alert(LessorCode);
            var BranchCode = '@Request.RequestContext.HttpContext.Session["BranchCode"]';
            var UserLogin = '@Request.RequestContext.HttpContext.Session["UserLogin"]';
            $.ajax({
                url: '@Url.Action("getCustomerInfo", "BasicContract")',
                type: "GET",
                data: {
                    id: $("#CR_Cas_Contract_Basic_Renter_Id").val(), operation: '', RenterMobile: RMobile/*, RenterEmail: REmail*/,
                    Driver_Mobile: $("#Driver_Mobile").val(), /*Driver_Email: $("#Driver_Email").val(),*/ Additional_Driver_Mobile: $("#Additional_Driver_Mobile").val(),
                    /*Additional_Driver_Email: $("#Additional_Driver_Email").val(),*/ LessorCode, BranchCode, UserLogin, ContractNo
                },

                success: function (result) {
                    console.log(result);
                    if (LessorCode != null && BranchCode != null && UserLogin != null) {
                        if (result.CR_Mas_Renter_Information_Ar_Name != null || result.CR_Elm_Ar_Name != null) {
                            if (result.Code != "" && result.Code != null) {
                                if (result.CR_Elm_Ar_Name != null && result.CR_Elm_Ar_Name != "") {
                                    $("#HiddenRenterName").val(result.CR_Elm_Ar_Name);
                                } else {
                                    $("#HiddenRenterName").val("");
                                }

                                if (result.Age != null && result.Age != "") {
                                    $("#RenterAge").val(result.Age);
                                } else {

                                    $("#RenterAge").val("");
                                }
                                if (result.CR_Elm_Email != null && result.CR_Elm_Email != "") {
                                    $("#HiddenRenterEmail").val(result.CR_Elm_Email);
                                } else {

                                    $("#HiddenRenterEmail").val("");

                                }

                                if (result.CR_Elm_Ar_Nationality != null && result.CR_Elm_Ar_Nationality != "") {
                                    $("#RenterNationality").val(result.CR_Elm_Ar_Nationality);
                                } else {

                                    $("#RenterNationality").val("");
                                }

                                $("#MsgCode").val(result.Code);

                                if (result.Address != null && result.Address != "") {
                                    $("#HiddenRenterAddress").val(result.Address);
                                    $("#HiddenRenterAddress").css('color', "#0288C7");
                                } else {

                                    $("#HiddenRenterAddress").val("العنوان الوطني غير متوفر");
                                    $("#HiddenRenterAddress").css('color', "red");
                                }


                                $("#RenterNationality").val(result.CR_Elm_Ar_Nationality);
                                $("#RenterGender").val(result.CR_Elm_Ar_Gender);
                                $("#RenterJob").val(result.CR_Elm_Ar_Jobs);
                                if (result.CR_Elm_Ar_Workplace_Subscription != null && result.CR_Elm_Ar_Workplace_Subscription != "") {
                                    $("#RenterEmployer").val(result.CR_Elm_Ar_Workplace_Subscription);
                                    $("#RenterEmployer").css('color', "#0288C7");
                                } else {
                                    $("#RenterEmployer").val("جهة العمل غير متوفرة");
                                    $("#RenterEmployer").css('color', "red");
                                }

                                $("#CR_Cas_Contract_Basic_Sector").val(result.OurSectorCode);
                                $("#CR_Cas_Contract_Basic_No").val(result.TracingNo);
                                $("#Expiry_Driving_License_Date").val(result.CR_Elm_Expiry_Driver_Date);

                                if (result.IdErrorMessage != "") {

                                    $("#RenterIdError").text(result.IdErrorMessage);
                                }

                                ///////////////// for Amir to allow/stop passing to the next page //////////////
                                var x = result.PassRenter;
                                //alert(x);
                                if (x == false) {
                                    //alert("t");
                                    document.getElementById("nextBtn").style.display = true;
                                } else {
                                    // alert("f");
                                    document.getElementById("nextBtn").style.display = false;
                                }

                                ///////////////////////////////////////////////////////////////////////////////


                            } else {
                                ////////////////////////Datat from our base/////////////////////////
                                $("#HiddenRenterName").val(result.CR_Mas_Renter_Information_Ar_Name);
                                $("#HiddenRenterEmail").val(result.CR_Mas_Renter_Information_Email);
                                $("#RenterNationality").val(result.CR_Mas_Renter_Information_Nationality);
                                $("#CR_Cas_Contract_Basic_Sector").val(result.CR_Mas_Renter_Information_Sector);

                                $("#CR_Cas_Contract_Basic_No").val(result.TracingNo);

                                $("#MsgCode").val(result.RenterMessageCode);
                                var expiryLicence = new Date(parseInt(result.CR_Mas_Renter_Information_Expiry_Driving_License_Date.replace("/Date(", "").replace(")/", ""), 10));
                                $("#Expiry_Driving_License_Date").val(expiryLicence.toLocaleDateString());

                                //if (result.DrivingLicenceErrorMessage != "") {
                                //    toastr.warning(result.DrivingLicenceErrorMessage);
                                //}

                                if (result.IdErrorMessage != "") {
                                    //toastr.warning(result.IdErrorMessage);
                                    $("#RenterIdError").text(result.IdErrorMessage);
                                }

                                //if (result.AddressErrorMessage != "") {
                                //    toastr.warning(result.AddressErrorMessage);
                                //}
                                ///////////////// for Amir to allow/stop passing to the next page //////////////
                                var x = result.PassRenter;
                                //alert(x);
                                if (x == false) {
                                    document.getElementById("nextBtn").disabled = true;
                                } else {
                                    document.getElementById("nextBtn").disabled = false;
                                }
                                var x1 = result.HaveContract;
                                if (x1 == true) {
                                    //$("#RenterIdError").text("عفوا هذا العميل لديه عقد سار");
                                    document.getElementById('RenterIdError').innerHTML = "عفوا هذا العميل لديه عقد سار";
                                    document.getElementById("nextBtn").disabled = true;

                                } else {

                                    document.getElementById("nextBtn").disabled = false;
                                }
                                ///////////////////////////////////////////////////////////////////////////////
                                //alert(result.EmployerErrorMessage);
                                //if (result.EmployerErrorMessage != "") {
                                //    toastr.warning(result.EmployerErrorMessage);
                                //}
                                ///////////////////////////////////////////////////////////////////////////////

                                if (result.address != null && result.address != "") {
                                    $("#HiddenRenterAddress").val(result.address);
                                    $("#HiddenRenterAddress").css('color', "#0288C7");
                                } else {

                                    $("#HiddenRenterAddress").val("العنوان الوطني غير متوفر");
                                    $("#HiddenRenterAddress").css('color', "red");
                                }

                                if (result.Age != null && result.Age != "") {
                                    $("#RenterAge").val(result.Age);
                                } else {

                                    $("#RenterAge").val("");
                                }


                                $("#RenterNationality").val(result.Nationality);
                                $("#RenterGender").val(result.Gender);
                                $("#RenterJob").val(result.Job);

                                if (result.Employer != null && result.Employer != "") {
                                    $("#RenterEmployer").val(result.Employer);
                                    $("#RenterEmployer").css('color', "#0288C7");
                                } else {
                                    $("#RenterEmployer").val("جهة العمل غير متوفرة");
                                    $("#RenterEmployer").css('color', "red");
                                }
                                //$("#CR_Cas_Contract_Basic_Previous_Balance").val("0.00");
                                //var PrevBalance = result.CR_Cas_Renter_Lessor_Balance;
                                //$("#CR_Cas_Contract_Basic_Previous_Balance").val(PrevBalance);
                            }
                        } else {
                            $("#HiddenRenterName").val("");
                            $("#HiddenRenterNationality").val("");
                            $("#HiddenAddress").val("");
                            $("#HiddenRenterGender").val("");
                            $("#HiddenRenterJob").val("");
                            $("#HiddenRenterEmployer").val("");
                            $("#HiddenCR_Cas_Contract_Basic_Sector").val("");
                            $("#HiddenCR_Cas_Contract_Basic_No").val("");
                            //$("#d").val("");
                            $("#HiddenRenterEmail").val("");
                            $("#HiddenRenterIdError").text("عفوا لم يتم العثور على الهوية");
                            //toastr.error("عفوا لم يتم العثور على الهوية");
                        }
                    }
                    else {
                                window.location.href = '@Url.Action("Login", "Account")';
                    }

                    $.ajax({
                        url: '@Url.Action("CarsList", "BasicContract")',
                        type: "GET",
                        data: { Sector: $("#CR_Cas_Contract_Basic_Sector").val() },
                        success: function (result) {
                            //$("#CarList").html(result);
                            document.getElementById('CarList').innerHTML = result;
                        }
                    });
                    $.ajax({
                        url: '@Url.Action("CategoriesList", "BasicContract")',
                        type: "GET",
                        data: { Sector: $("#CR_Cas_Contract_Basic_Sector").val() },
                        success: function (result) {
                            $('#categories sidebar').html(result);

                        }
                    });
                    CheckCarsListNo();
                }
            });


        }
        };

</script>


<script>
    function CheckDriverBirthDate() {
        var q = new Date();
        var date = new Date(q.getFullYear(), q.getMonth(), q.getDate());
        var mydate = new Date(document.getElementById('DriverBirthDate').value);

        if (date < mydate) {
            document.getElementById('DriverBirthDateErr').innerHTML = "الرجاء التأكد من التاريخ المدخل";
        } else {
            document.getElementById('DriverBirthDateErr').innerHTML = "";
        }
    }




    function CheckDriverMobile(v) {
        var mobile = v;
        if (mobile[0] == 9 && mobile[1] == 6 && mobile[2] == 6 && mobile[3] == 5 && mobile.length == 12) {
            document.getElementById('DriverMobileErr').innerHTML = "";
            //alert(true);
        } else {
            document.getElementById('DriverMobileErr').innerHTML = "الرجاء التأكد من رقم الجوال";
            //alert(false);
            return;
        }
    }


</script>

<script>
        function getDriverInfo(k) {

            var Id = document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value;
            var err = document.getElementById('DriverIdError').innerHTML;
            var RMobile = document.getElementById('Driver_Mobile').value;
            var ContractNo = document.getElementById('CR_Cas_Contract_Basic_No').value;


            if (Id == "") {
                err = "الرجاء إدخال الهوية";
                return;
            }


            if (RMobile == "") {
                document.getElementById('DriverMobileErr').innerHTML = "الرجاء إدخال رقم الجوال";
                return;
            }
            if ((k === 13 && err === "" && RMobile != "") || (k === 9 && err === "" && RMobile != "")) {
                //CheckDriverMobile(RMobile);
                //var REmail = document.getElementById('Driver_Email').value;
                        var LessorCode ='@Request.RequestContext.HttpContext.Session["LessorCode"]';
                    // alert(LessorCode);
                    var BranchCode = '@Request.RequestContext.HttpContext.Session["BranchCode"]';
                    var UserLogin = '@Request.RequestContext.HttpContext.Session["UserLogin"]';
                    $.ajax({
                    url: '@Url.Action("getCustomerInfo", "BasicContract")',
                    type: "GET",
                        data: {
                            id: $("#CR_Cas_Contract_Basic_Driver_Id").val(), operation: 'Driver', RenterMobile: RMobile, /*RenterEmail: REmail,*/
                            Driver_Mobile: $("#Driver_Mobile").val(), Driver_Email: $("#Driver_Email").val(), Additional_Driver_Mobile: $("#Additional_Driver_Mobile").val(),
                            Additional_Driver_Email: $("#Additional_Driver_Email").val(), LessorCode, BranchCode, UserLogin, ContractNo
                        },

                        success: function (result) {
                        if (result.CR_Mas_Renter_Information_Ar_Name != null || result.CR_Elm_Ar_Name!=null) {
                            if (result.Code != "" && result.Code != null) {
                                if (result.CR_Elm_Ar_Name != null && result.CR_Elm_Ar_Name != "") {
                                    $("#HiddenDriverName").val(result.CR_Elm_Ar_Name);
                                } else {
                                    $("#HiddenDriverName").val("");
                                    toastr.error("عفوا الرجاء التحقق من الهوية")
                                }
                                if (result.CR_Elm_Email != null && result.CR_Elm_Email != "") {
                                    $("#HiddenDriverEmail").val(result.CR_Elm_Email);
                                } else {
                                    $("#HiddenDriverEmail").val("");
                                }

                                if (result.Address != null && result.Address != "") {
                                    $("#HiddenDriverAddress").val(result.Address);
                                    document.getElementById("HiddenDriverAddress").style.color = "#0288C7";
                                } else {

                                    $("#HiddenDriverAddress").val( "العنوان الوطني غير متوفر");
                                    document.getElementById("HiddenDriverAddress").style.color = "red";
                                }

                                document.getElementById('DriverAge').value = result.Age;
                                document.getElementById('HiddenDriverJob').value = result.CR_Elm_Ar_Jobs;

                                if (result.CR_Elm_Ar_Workplace_Subscription != null && result.CR_Elm_Ar_Workplace_Subscription != "") {
                                    $("#HiddenDriverEmployer").val(result.CR_Elm_Ar_Workplace_Subscription);
                                    document.getElementById("HiddenDriverEmployer").style.color = "#0288C7";
                                } else {
                                    $("#HiddenDriverEmployer").val("الجهة غير متوفرة");
                                    document.getElementById("HiddenDriverEmployer").style.setProperty('color', 'red', 'important');

                                }
                                if (result.CR_Elm_Ar_Nationality != null && result.CR_Elm_Ar_Nationality != "") {
                                    document.getElementById('HiddenDriverNationality').value = result.CR_Elm_Ar_Nationality;
                                    document.getElementById("HiddenDriverNationality").style.color = "#0288C7";
                                } else {
                                    document.getElementById('HiddenDriverNationality').value = "الجنسية غير متوفرة";
                                    document.getElementById("HiddenDriverNationality").style.setProperty('color', 'red', 'important');
                                }

                                if (result.CR_Elm_Ar_Gender != null && result.CR_Elm_Ar_Gender != "") {
                                    document.getElementById('HiddenDriverGender').value = result.CR_Elm_Ar_Gender
                                    document.getElementById("HiddenDriverGender").style.color = "#0288C7";
                                } else {
                                    document.getElementById('HiddenDriverGender').value = "الجنس غير متوفر";
                                    document.getElementById("HiddenDriverGender").style.setProperty('color', 'red', 'important');
                                }
                                if (result.IdErrorMessage != "") {
                                    document.getElementById('HiddenDriverIdError').innerHTML = result.IdErrorMessage;
                                }
                                if (result.DrivingLicenceErrorMessage != "") {
                                    document.getElementById('HiddenDrivingLicenceError').innerHTML = "عفوا رخصة القيادة منتهية";
                                } else {
                                    document.getElementById('HiddenDrivingLicenceError').innerHTML = "";
                                }
                                document.getElementById('HiddenDriverJob').value = result.Job;
                                //if (result.AddressErrorMessage != "") {
                                //    toastr.warning(result.AddressErrorMessage);
                                //}
                                //alert(result.PassRenter);
                                /////////////////// for Amir to allow/stop passing to the next page //////////////
                                var x = result.PassRenter;
                                //alert(x);
                            } else {
                                $("#HiddenDriverName").val(result.CR_Mas_Renter_Information_Ar_Name);
                                //$("#HiddenDriverEmail").val(result.CR_Mas_Renter_Information_Email);


                                if (result.CR_Mas_Renter_Information_Email != null && result.CR_Mas_Renter_Information_Email != "") {
                                    $("#HiddenDriverEmail").val(result.CR_Mas_Renter_Information_Email);
                                    document.getElementById("HiddenDriverEmail").style.color = "#0288C7";
                                }
                                else {
                                    $("#HiddenDriverEmail").val("البريد الالكتروني غير متوفر");
                                    document.getElementById("HiddenDriverEmail").style.setProperty('color', 'red', 'important');
                                }

                                document.getElementById('DriverAge').value = result.Age;

                                if (result.address != null && result.address != "") {
                                    $("#HiddenDriverAddress").val(result.address);
                                    document.getElementById("HiddenDriverAddress").style.color = "#0288C7";
                                } else {
                                    //alert("change to null");
                                    $("#HiddenDriverAddress").val("العنوان الوطني غير متوفر");
                                    document.getElementById("HiddenDriverAddress").style.setProperty('color', 'red', 'important');

                                }

                                if (result.Employer != null && result.Employer != "") {
                                    $("#HiddenDriverEmployer").val(result.Employer);
                                    document.getElementById("HiddenDriverEmployer").style.color = "#0288C7";
                                } else {
                                    $("#HiddenDriverEmployer").val("الجهة غير متوفرة");
                                    document.getElementById("HiddenDriverEmployer").style.setProperty('color', 'red', 'important');

                                }

                                if (result.Nationality != null && result.Nationality != "") {
                                    document.getElementById('HiddenDriverNationality').value = result.Nationality;
                                    document.getElementById("HiddenDriverNationality").style.color = "#0288C7";
                                } else {
                                    document.getElementById('HiddenDriverNationality').value = "الجنسية غير متوفرة";
                                    document.getElementById("HiddenDriverNationality").style.setProperty('color', 'red', 'important');
                                }

                                if (result.Gender != null && result.Gender != "") {
                                    document.getElementById('HiddenDriverGender').value = result.Gender
                                    document.getElementById("HiddenDriverGender").style.color = "#0288C7";
                                } else {
                                    document.getElementById('HiddenDriverGender').value = "الجنس غير متوفر";
                                    document.getElementById("HiddenDriverGender").style.setProperty('color', 'red', 'important');
                                }
                                document.getElementById('HiddenDriverJob').value = result.CR_Elm_Ar_Jobs;

                                if (result.IdErrorMessage != "") {
                                    //toastr.warning(result.IdErrorMessage);
                                    document.getElementById('HiddenDriverIdError').innerHTML = result.IdErrorMessage;
                                }

                                if (result.DrivingLicenceErrorMessage != "") {
                                    //toastr.warning(result.DrivingLicenceErrorMessage);
                                    document.getElementById('HiddenDrivingLicenceError').innerHTML = "عفوا رخصة القيادة منتهية";
                                } else {
                                    document.getElementById('HiddenDrivingLicenceError').innerHTML = "";
                                }

                                document.getElementById('HiddenDriverJob').value = result.Job
                            }
                        } else {
                            document.getElementById('HiddenDriverGender').value = "";
                            document.getElementById('HiddenDriverNationality').value = "";
                            $("#HiddenDriverEmployer").val("");
                            $("#HiddenDriverAddress").val("");
                            $("#HiddenDriverName").val("");
                            $("#HiddenDriverEmail").val("");
                            document.getElementById('HiddenDriverIdError').innerHTML = "عفوا لم يتم العثور على الهوية";
                        }
                        var min = document.getElementById('MinAge').value;
                        var max = document.getElementById('MaxAge').value;
                        //alert(result.Age);
                        //if (result.Age < min || result.Age > max) {
                        //    toastr.error("عفوا سن السائق لا يخول له سياقة هذه السيارة");
                        //}
                    }
                });
            } else if (RMobile == "") {
                document.getElementById('DriverMobileErr').innerHTML = "الرجاء إدخال رقم الجوال";
            }
        };
</script>

<script>
    function CheckAddDriverBirthDate() {
        var q = new Date();
        var date = new Date(q.getFullYear(), q.getMonth(), q.getDate());
        var mydate = new Date(document.getElementById('AdditionalDriverBirthDate').value);

        if (date < mydate) {
            document.getElementById('AddDriverBirthDateError').innerHTML = "الرجاء التأكد من التاريخ المدخل";
        } else {
            document.getElementById('AddDriverBirthDateError').innerHTML = "";
        }
    }
    function CheckAddDriverMobile(v) {
        var mobile = v;
        if (mobile[0] == 9 && mobile[1] == 6 && mobile[2] == 6 && mobile[3] == 5 && mobile.length == 12) {
            document.getElementById('Additional_Driver_Mobile').innerHTML = "";
            //alert(true);
        } else {
            document.getElementById('AdditionalDriverMobileErr').innerHTML = "الرجاء التأكد من رقم الجوال";
            //alert(false);
            return;
        }
    }
</script>

<script>
    function getAdditionalDriverInfo(k) {
        var ContractNo = document.getElementById('CR_Cas_Contract_Basic_No').value;
        var err = document.getElementById('AdditionalDriverIdError').innerHTML;
        var LessorCode ='@Request.RequestContext.HttpContext.Session["LessorCode"]';
        var BranchCode = '@Request.RequestContext.HttpContext.Session["BranchCode"]';
        var UserLogin = '@Request.RequestContext.HttpContext.Session["UserLogin"]';
        var RMobile = document.getElementById('Additional_Driver_Mobile').value;
        var REmail = document.getElementById('Additional_Driver_Email').value;
        if ((k === 13 && err === "" && RMobile != "") || (k === 9 && err === "" && RMobile != "")) {
            $.ajax({
                url: '@Url.Action("getCustomerInfo", "BasicContract")',
                type: "GET",
                data: {
                    id: $("#CR_Cas_Contract_Basic_Additional_Driver_Id").val(), operation: 'AdditionalDriver', RenterMobile: $("#RenterMobile").val(), RenterEmail: $("#RenterEmail").val(),
                    Driver_Mobile: $("#Driver_Mobile").val(), Driver_Email: $("#Driver_Email").val(), Additional_Driver_Mobile: $("#Additional_Driver_Mobile").val(),
                    Additional_Driver_Email: REmail, LessorCode, BranchCode, UserLogin, ContractNo
                },
                success: function (result) {
                    if (result.CR_Mas_Renter_Information_Ar_Name != null || result.CR_Elm_Ar_Name != null) {
                        if (result.Code != "" && result.Code != null) {
                            if (result.CR_Elm_Ar_Name != null && result.CR_Elm_Ar_Name != "") {
                                $("#HiddenAdditionalDriverName").val(result.CR_Elm_Ar_Name);
                            } else {
                                $("#HiddenAdditionalDriverName").val("");
                            }
                            if (result.CR_Elm_Email != null && result.CR_Elm_Email != "") {
                                $("#HiddenAdditionalDriverEmail").val(result.CR_Elm_Email);
                            } else {
                                $("#HiddenAdditionalDriverEmail").val("");
                            }
                            if (result.Address != null && result.Address != "") {
                                $("#HiddenAdditionalDriverAddress").val(result.Address);
                                document.getElementById("HiddenAdditionalDriverAddress").style.color = "#0288C7";
                            } else {
                                $("#HiddenAdditionalDriverAddress").val("العنوان الوطني غير متوفر");
                                document.getElementById("HiddenAdditionalDriverAddress").style.color = "red";
                            }
                            if (result.CR_Elm_Ar_Workplace_Subscription != null && result.CR_Elm_Ar_Workplace_Subscription != "") {
                                $("#HiddenAdditionalDriverEmployer").val(result.CR_Elm_Ar_Workplace_Subscription);
                                document.getElementById("HiddenAdditionalDriverEmployer").style.color = "#0288C7";
                            } else {
                                $("#HiddenAdditionalDriverEmployer").val("الجهة غير متوفرة");
                                document.getElementById("HiddenAdditionalDriverEmployer").style.setProperty('color', 'red', 'important');
                            }
                            if (result.CR_Elm_Ar_Nationality != null && result.CR_Elm_Ar_Nationality != "") {
                                document.getElementById('HiddenAdditionalDriverNationality').value = result.CR_Elm_Ar_Nationality
                                document.getElementById("HiddenAdditionalDriverNationality").style.color = "#0288C7";
                            } else {
                                document.getElementById('HiddenAdditionalDriverNationality').value = "الجنسية غير متوفرة";
                                document.getElementById("HiddenAdditionalDriverNationality").style.setProperty('color', 'red', 'important');
                            }
                            if (result.CR_Elm_Ar_Gender != null && result.CR_Elm_Ar_Gender != "") {
                                document.getElementById('HiddenAdditionalDriverGender').value = result.CR_Elm_Ar_Gender
                                document.getElementById("HiddenAdditionalDriverGender").style.color = "#0288C7";
                            } else {
                                document.getElementById('HiddenAdditionalDriverGender').value = "الجنس غير متوفر";
                                document.getElementById("HiddenAdditionalDriverGender").style.setProperty('color', 'red', 'important');
                            }
                            document.getElementById('HiddenAdditionalDriverJob').value = result.CR_Elm_Ar_Jobs
                            document.getElementById('HiddenAdditionalDriverAge').value = result.Age;
                            if (result.CR_Elm_Expiry_Driver_Date != null && result.CR_Elm_Expiry_Driver_Date != "") {
                                var date = new Date(parseInt(result.CR_Elm_Expiry_Driver_Date.replace("/Date(", "").replace(")/", ""), 10));
                                document.getElementById('HiddenAdditionalDriver_Driving_License_Date').value = date.toLocaleDateString();
                            } else {
                                document.getElementById('HiddenAdditionalDriver_Driving_License_Date').value = "";
                            }
                            if (result.IdErrorMessage != "") {
                                document.getElementById('HiddenAdditionalDriverIdError').innerHTML = result.IdErrorMessage;
                            }
                            if (result.DrivingLicenceErrorMessage != "") {
                                document.getElementById('HiddenDrivingLicenceError').innerHTML = "عفوا رخصة القيادة منتهية";
                            } else {
                                document.getElementById('HiddenDrivingLicenceError').innerHTML = "";
                            }
                        } else {
                            $("#HiddenAdditionalDriverName").val(result.CR_Mas_Renter_Information_Ar_Name);
                            $("#HiddenAdditionalDriverEmail").val(result.CR_Mas_Renter_Information_Email);
                            document.getElementById('AdditionalDriverAge').value = result.Age;
                            if (result.address != null && result.address != "") {
                                $("#HiddenAdditionalDriverAddress").val(result.address);
                                document.getElementById("HiddenAdditionalDriverAddress").style.color = "#0288C7";
                            } else {
                                $("#HiddenAdditionalDriverAddress").val("العنوان الوطني غير متوفر");
                                document.getElementById("HiddenAdditionalDriverAddress").style.color = "red";
                            }
                            if (result.Employer != null && result.Employer != "") {
                                $("#HiddenAdditionalDriverEmployer").val(result.Employer);
                                document.getElementById("HiddenAdditionalDriverEmployer").style.color = "#0288C7";
                            } else {
                                $("#HiddenAdditionalDriverEmployer").val("الجهة غير متوفرة");
                                document.getElementById("HiddenAdditionalDriverEmployer").style.setProperty('color', 'red', 'important');
                            }
                            if (result.Nationality != null && result.Nationality != "") {
                                document.getElementById('HiddenAdditionalDriverNationality').value = result.Nationality;
                                document.getElementById("HiddenAdditionalDriverNationality").style.color = "#0288C7";
                            } else {
                                document.getElementById('HiddenAdditionalDriverNationality').value = "الجنسية غير متوفرة";
                                document.getElementById("HiddenAdditionalDriverNationality").style.setProperty('color', 'red', 'important');
                            }
                            if (result.Gender != null && result.Gender != "") {
                                document.getElementById('HiddenAdditionalDriverGender').value = result.Gender
                                document.getElementById("HiddenAdditionalDriverGender").style.color = "#0288C7";
                            } else {
                                document.getElementById('HiddenAdditionalDriverGender').value = "الجنس غير متوفر";
                                document.getElementById("HiddenAdditionalDriverGender").style.setProperty('color', 'red', 'important');
                            }
                            document.getElementById('HiddenAdditionalDriverJob').value = result.Job;
                            if (result.CR_Mas_Renter_Information_Expiry_Driving_License_Date != null && result.CR_Mas_Renter_Information_Expiry_Driving_License_Date != "") {
                                var date = new Date(parseInt(result.CR_Mas_Renter_Information_Expiry_Driving_License_Date.replace("/Date(", "").replace(")/", ""), 10));
                                document.getElementById('HiddenAdditionalDriver_Driving_License_Date').value = date.toLocaleDateString();
                            } else {
                                document.getElementById('HiddenAdditionalDriver_Driving_License_Date').value = "";
                            }
                            if (result.IdErrorMessage != "") {
                                document.getElementById('HiddenAdditionalDriverIdError').innerHTML = result.IdErrorMessage;
                            } else {
                                document.getElementById('HiddenAdditionalDriverIdError').innerHTML = "";
                            }
                            if (result.DrivingLicenceErrorMessage != "") {
                                document.getElementById('HiddenDrivingLicenceError').innerHTML = "عفوا رخصة القيادة منتهية";
                            } else {
                                document.getElementById('HiddenDrivingLicenceError').innerHTML = "";
                            }
                        }
                    } else {
                        document.getElementById('HiddenAdditionalDriverJob').value = "";
                        document.getElementById('HiddenAdditionalDriverGender').value = "";
                        document.getElementById('HiddenAdditionalDriverNationality').value = "";
                        $("#HiddenAdditionalDriverEmployer").val("");
                        $("#HiddenAdditionalDriverAddress").val("");
                        $("#HiddenAdditionalDriverBirthDate").val("");
                        $("#HiddenAdditionalDriverName").val("");
                        $("#HiddenAdditionalDriverEmail").val("");
                        $("#HiddenAdditionalDriverNationality").val("");
                        document.getElementById('HiddenAdditionalDriverIdError').innerHTML = "عفوا لم يتم العثور على الهوية";
                    }
                }
            });
        } else if (RMobile == "") {
            document.getElementById('AdditionalDriverMobileErr').innerHTML = "الرجاء إدخال رقم الجوال";
        }

       
</script>
<script>
       function getBalanceRenter() {
        var LessorCode = '@Request.RequestContext.HttpContext.Session["LessorCode"]';
        $.ajax({
            url: '@Url.Action("GetBalance", "BasicContract")',
            type: "GET",
            data: { Id: $("#CR_Cas_Contract_Basic_Renter_Id").val(), LessorCode: LessorCode },
            success: function(result) {
                $("#CR_Cas_Contract_Basic_Previous_Balance").val(result);
            }
        });
}
</script>
<script>
    function CalculateContract() {
        var price = 0;
        var nbrDays = document.getElementById('CR_Cas_Contract_Basic_Expected_Rental_Days').value;
        if (parseInt(nbrDays) > 0) {
            var SerialNo = document.getElementById("serialNo").value;
            price = document.getElementById('pr1_' + SerialNo).innerHTML;
            var today = new Date();
            today.setDate(today.getDate() + parseInt(nbrDays));
            var options = { year: 'numeric', month: '2-digit', day: '2-digit' };
            document.getElementById('CR_Cas_Contract_Basic_Expected_End_Date').value = today.toLocaleDateString('ja-JP', options).replace(/\//g, '/');
            var PriceET = parseFloat(price) * parseFloat(nbrDays);
            document.getElementById('Price').value = PriceET.toFixed(2);
            document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').value = "0";
            document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').value = "0";
            var TotalChoices = document.getElementById('TotalChoices').innerHTML;
            var TotalAdditionals = document.getElementById('TotalAdditionals').innerHTML;
            if (TotalChoices != "") {
                TotalChoices = (parseFloat(TotalChoices) * parseFloat(nbrDays)).toFixed(2);
                document.getElementById('ChoicesTotal').value = TotalChoices;
            } else {
                TotalChoices = 0;
                document.getElementById('ChoicesTotal').value = "0.00";
            }
            if (TotalAdditionals != "") {
                TotalAdditionals = parseFloat(TotalAdditionals).toFixed(2);
                document.getElementById('AdditionalTotal').value = parseFloat(TotalAdditionals).toFixed(2);
            } else {
                TotalAdditionals = 0;
                document.getElementById('AdditionalTotal').value = "0.00";
            }
            if (document.getElementById('CR_Cas_Contract_Basic_is_Additional_Driver').checked) {
                var DriverVal = document.getElementById('AdditionalDriverVal_' + SerialNo).innerHTML.trim();
                document.getElementById("ValueAdditionalDriver").value = parseFloat(DriverVal).toFixed(2);
            } else {
                var DriverVal = "0.00";
                document.getElementById("ValueAdditionalDriver").value = DriverVal;
            }
            var IntAuth = document.getElementById('InternalAuthValue').value;
            var totcontract = parseFloat(PriceET) + parseFloat(TotalChoices /** nbrDays*/) + parseFloat(TotalAdditionals) + parseFloat(DriverVal) + parseFloat(IntAuth);
            document.getElementById("TotalContract").value = totcontract.toFixed(2);
            document.getElementById("TotalContractHT").value = totcontract.toFixed(2);
            CalculateTaxVal();
            
        } else {
            document.getElementById('jourerror').value = 'أدخل عدد الأيام';
            document.getElementById('CR_Cas_Contract_Basic_Expected_End_Date').value = "";
            document.getElementById('Price').value = "0.00";
            document.getElementById('ChoicesTotal').value = "0.00";
            document.getElementById('AdditionalTotal').value = "0.00";
            document.getElementById('ValueAdditionalDriver').value = "0.00";
            document.getElementById('TotalContract').value = "0.00";
            document.getElementById('ContractDiscount').value = "0.00";
            document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').value = "0.00";
            document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').value = "0.00";
            document.getElementById('TotalContractHT').value = "0.00";
            document.getElementById('TotalContractTax').value = "0.00";
            document.getElementById('TotalContractPrice').value = "0.00";
            document.getElementById('CR_Cas_Contract_Basic_Previous_Balance').value = "0.00";
            document.getElementById('TotalToPay').value = "0.00";
            document.getElementById('TotalPayed').value = "0.00";
            document.getElementById('PayType').disabled = true;
            document.getElementById('PayType').selectedIndex = 0;
            document.getElementById('CasherName').disabled = true;
            document.getElementById('CasherName').selectedIndex = 0;
        }
    };
</script>

<script>
    $(document).ready(
        function () {
            $("#ExAuth").click(function () {
                var serial = document.getElementById("serialNo").value;
                if (document.getElementById('ExAuth').checked) {
                    var ExtAuth = document.getElementById('ExternalFeeTamm_' + serial).innerHTML;
                    document.getElementById('ExternalAuthValue').value = ExtAuth.trim();
                    var IntAuth = document.getElementById('InternalFeeTamm_' + serial).innerHTML;
                    var totcontract = document.getElementById("TotalContract").value;
                    totcontract = parseFloat(totcontract) - parseFloat(IntAuth) + parseFloat(ExtAuth);
                    document.getElementById("TotalContract").value = totcontract.toFixed(2);

                    document.getElementById('InternalAuthValue').value = "0.00";
                } else {
                    var IntAuth = document.getElementById('InternalFeeTamm_' + serial).innerHTML;
                    document.getElementById('InternalAuthValue').value = IntAuth.trim();


                    var ExtAuth = document.getElementById('ExternalFeeTamm_' + serial).innerHTML;
                    var totcontract = document.getElementById("TotalContract").value;
                    totcontract = parseFloat(totcontract) - parseFloat(ExtAuth) + parseFloat(IntAuth);
                    document.getElementById("TotalContract").value = totcontract.toFixed(2);

                    document.getElementById('ExternalAuthValue').value = "0.00";
                }
                CalculateDiscount();
                CalculateTaxVal();
            })
        });
</script>

<script>
    function CalculateDiscount() {
        var TotalContract = parseFloat(document.getElementById("TotalContract").value);
        var Discount = parseFloat(document.getElementById("ContractDiscount").value);
        var t = (1 - (Discount / 100))
        var TotContractHT = parseFloat(TotalContract) * t;
        document.getElementById("TotalContractHT").value = TotContractHT.toFixed(2);
        var DiscountValue = parseFloat(TotalContract) * (Discount / 100);
        document.getElementById('CR_Cas_Contract_Basic_Discount_Value').value = DiscountValue.toFixed(2);
    };
</script>

<script>
    function CalculateTaxVal() {
        var serial = document.getElementById("serialNo").value;
        var TotalContractHT = parseFloat(document.getElementById("TotalContractHT").value);
        var tax = document.getElementById('TAX_' + serial).innerHTML;
        var t = (parseFloat(tax) / 100)
        var ContractTax = parseFloat(TotalContractHT) * t;
        document.getElementById("TotalContractTax").value = ContractTax.toFixed(2);
        document.getElementById('TotalContractPrice').value = (ContractTax + TotalContractHT).toFixed(2);
        var TotalContractPrice = parseFloat(document.getElementById('TotalContractPrice').value);
        var PreviousBalance = parseFloat(document.getElementById('CR_Cas_Contract_Basic_Previous_Balance').value);
        if (PreviousBalance > 0) {
            document.getElementById('TotalToPay').value = (parseFloat(TotalContractPrice) + parseFloat(PreviousBalance)).toFixed(2);
        } else {
            document.getElementById('TotalToPay').value = (parseFloat(TotalContractPrice) + parseFloat(PreviousBalance)).toFixed(2);
        }
    };
</script>

<script>
    $(document).ready(
        function () {
            $("#CR_Cas_Contract_Basic_is_Additional_Driver").click(function () {

                var SerialNo = document.getElementById("serialNo").value;
                if (document.getElementById('CR_Cas_Contract_Basic_is_Additional_Driver').checked) {
                    var DriverVal = document.getElementById('AdditionalDriverVal_' + SerialNo).innerHTML;
                    document.getElementById("ValueAdditionalDriver").value = parseFloat(DriverVal).toFixed(2);
                } else {
                    document.getElementById("CR_Cas_Contract_Basic_Additional_Driver_Id").value = "";
                    document.getElementById("AdditionalDriverBirthDate").value = "";
                    document.getElementById("AdditionalDriverName").value = "";
                    document.getElementById("Additional_Driver_Email").value = "";
                    document.getElementById("AdditionalDriverNationality").value = "";
                    document.getElementById("AdditionalDriverGender").value = "";
                    document.getElementById("AdditionalDriverJob").value = "";
                    document.getElementById("AdditionalDriver_Driving_License_Date").value = "";
                    document.getElementById("AdditionalDriverEmployer").value = "";
                    document.getElementById("AdditionalDriverAddress").value = "";
                    document.getElementById("AdditionalDriverReason").value = "";
                    document.getElementById("ValueAdditionalDriver").value = "0.00";
                }

            })
        });
</script>

<script>
    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_is_Renter_Driver').change(function () {
            if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked == true) {
                document.getElementById('CR_Cas_Contract_Basic_Driver_Id').readOnly = true;
                document.getElementById('Driver_Mobile').readOnly = true;
                document.getElementById('Driver_Email').readOnly = true;
                document.getElementById('Driver_code').readOnly = true;

            } else {
                document.getElementById('CR_Cas_Contract_Basic_Driver_Id').readOnly = false;
                document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value = "";
                document.getElementById('DriverBirthDate').value = "";
                document.getElementById('DriverName').value = "";
                document.getElementById('DriverNationality').value = "";
                document.getElementById('DriverGender').value = "";
                document.getElementById('DriverJob').value = "";
                document.getElementById('DriverEmployer').value = "";
                document.getElementById('DriverAddress').value = "";
                document.getElementById('CR_Mas_Renter_Information_Expiry_Driving_License_Date').value = "";
                document.getElementById('DriverAge').value = "";
                document.getElementById('Driver_Mobile').readOnly = false;
                document.getElementById('Driver_Email').readOnly = false;
                document.getElementById('Driver_code').readOnly = false;
            }
        })
    })
</script>

<script type="text/javascript">
    $(document).on("keypress", 'form', function (e) {
        var code = e.keyCode || e.which;
        if (code == 13) {
            e.preventDefault();
            return false;
        }
    });
</script>

<script>
    $(document).keypress(function (e) {
        if (e.keyCode === 13) {
            e.preventDefault();
            return false;
        }
    });
</script>

<script type="text/javascript">
    function NextRenter() {
        //alert();
        if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked) {
            var renterID = document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value;
            //alert(renterID);
            document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value = renterID;
            document.getElementById('DriverBirthDate').value = document.getElementById('d').value;
            document.getElementById('DriverName').value = document.getElementById('RenterName').value;
            document.getElementById('DriverNationality').value = document.getElementById('RenterNationality').value;
            document.getElementById('DriverGender').value = document.getElementById('RenterGender').value;
            document.getElementById('DriverJob').value = document.getElementById('RenterJob').value;
            document.getElementById('DriverEmployer').value = document.getElementById('RenterEmployer').value;
            document.getElementById('DriverAge').value = document.getElementById('RenterAge').value;
            document.getElementById('Driver_Mobile').value = document.getElementById('RenterMobile').value;
            document.getElementById('Driver_Email').value = document.getElementById('RenterEmail').value;
            document.getElementById('CR_Mas_Renter_Information_Expiry_Driving_License_Date').value = document.getElementById('Expiry_Driving_License_Date').value;
            if (document.getElementById('Address').value == "العنوان الوطني غير متوفر") {
                $("#DriverAddress").val("العنوان الوطني غير متوفر");
                document.getElementById("DriverAddress").style.color = "red";

            } else {
                document.getElementById('DriverAddress').value = document.getElementById('Address').value;
                document.getElementById("DriverAddress").style.color = "#0288C7";
            }
        } else {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0');
            var yyyy = today.getFullYear();

            today = yyyy + '/' + mm + '/' + dd;
            document.getElementById('DriverBirthDate').value = today;
        }
    }
</script>

<script type="text/javascript">
    function CheckAdditionalDriverAge() {
        var AdditionalDriverAge = document.getElementById("AdditionalDriverAge").value;
        var CarMaxAge = document.getElementById("MaxAge").value;
        var CarMinAge = document.getElementById("MinAge").value;
        var S_Age = "@Session["ContractAge"]";
        if (S_Age == "True") {
            return true;
        } else {
            if (parseInt(AdditionalDriverAge) > parseInt(CarMinAge) && parseInt(AdditionalDriverAge) < parseInt(CarMaxAge)) {
                ocument.getElementById("nextBtn").style.display = true;
                return true;
            } else {
                toastr.info("سن السائق لا يخول له سياقة السيارة");
                ocument.getElementById("nextBtn").style.display = false;
                return false;
            }
        }
    }
</script>

<script type="text/javascript">
    function CheckDriverAge() {
        var DriverAge = document.getElementById("DriverAge").value;
        //alert(DriverAge);
        var CarMaxAge = document.getElementById("MaxAge").value;

        var CarMinAge = document.getElementById("MinAge").value;
        //alert(CarMinAge);
        var S_Age = "@Session["ContractAge"]";
        if (S_Age == "True") {
            return true;
        } else {
            if (parseInt(DriverAge) > parseInt(CarMinAge) && parseInt(DriverAge) < parseInt(CarMaxAge)) {
                document.getElementById("nextBtn").style.display = true;
                return true;
            } else {
                toastr.info("سن السائق لا يخول له سياقة السيارة");
                //alert('aaaaa');
                document.getElementById("nextBtn").style.display = false;

                return false;
            }
        }

    }
</script>

<script type="text/javascript">
    function CheckRenterAge() {
        var S_Age = "@Session["ContractAge"]";
        if (S_Age == "True") {

            return true;
        } else {

            if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked) {
                var RAge = document.getElementById("RenterAge").value;
                var CarMaxAge = document.getElementById("MaxAge").value;
                var CarMinAge = document.getElementById("MinAge").value;
                if (parseInt(RAge) > parseInt(CarMinAge) && parseInt(RAge) < parseInt(CarMaxAge)) {

                    document.getElementById("nextBtn").style.display = true;

                    return true;
                } else {

                    toastr.info("سن المستأجر لا يخول له سياقة السيارة");
                    document.getElementById("nextBtn").style.display = false;

                    return false;
                }

            } else {
                document.getElementById("nextBtn").style.display = true;
                return true;
            }
        }

    }
</script>

<script type="text/javascript">
    function CheckSelectedCars() {
        //Reference the Table.
        var n = 0;
        var grid = document.getElementById("ListCars");

        //Reference the CheckBoxes in Table.
        var checkBoxes = grid.getElementsByClassName("CLRadio");

        //Loop through the CheckBoxes.
        for (var i = 0; i < checkBoxes.length; i++) {
            if (checkBoxes[i].type == "radio") {
                if (checkBoxes[i].checked) {
                    n = n + 1;
                }
            }
        }
        if (n == 1) {
            return true;
        } else {
            toastr.error("الرجاء إختيار سيارة");
        }
    }
</script>

<script type="text/javascript">
    function CheckInspection() {
        console.log("Click")
        var n = 0;
        var grid = document.getElementById("InspectionTable");

        //Reference the CheckBoxes in Table.
        var checkbox = grid.getElementsByClassName("ChkChoicesList");
        console.log(checkbox)

        //Loop through the CheckBoxes.
        for (var i = 0; i < checkbox.length; i++) {
            if (checkbox[i].type == "checkbox") {
                if (checkbox[i].checked) {
                    n = n + 1;
                }
            }
        }
        if ((n == checkbox.length)) {
            return true;
            console.log("true")

        } else {
            return false;
            console.log("false")
            toastr.warning("الرجاء اكمال الفحص الضاهري");
        }
    }
</script>

<script>
    var loadImg1 = function (event) {
        var image = document.getElementById('img1');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg2 = function (event) {
        var image = document.getElementById('img2');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg3 = function (event) {
        var image = document.getElementById('img3');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg4 = function (event) {
        var image = document.getElementById('img4');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg5 = function (event) {
        var image = document.getElementById('img5');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg6 = function (event) {
        var image = document.getElementById('img6');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg7 = function (event) {
        var image = document.getElementById('img7');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg8 = function (event) {
        var image = document.getElementById('img8');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg9 = function (event) {
        var image = document.getElementById('img9');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var loadImg10 = function (event) {
        var image = document.getElementById('img10');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

<script>
    var RenterSignatureImg = function (event) {
        var image = document.getElementById('RenterSignatureImg');
        image.src = URL.createObjectURL(event.target.files[0]);
    }
</script>

<script type="text/javascript">
    function AdditionalDriverNext() {
        var c = document.getElementById("CR_Cas_Contract_Basic_is_Additional_Driver")
        if (c.checked == true) {
            // alert('next additionalDriver');
        } else {
            //alert();
            $("#tabs").tabs({ active: 5 });
        }
    }
</script>

<script type="text/javascript">
            window.addEventListener("load", function () {
                this.document.getElementById('CR_Cas_Contract_Basic_Renter_Id').focus();
                this.document.getElementById('TotalPayed').value = "0.00";
                this.document.getElementById('ContractDiscount').value = "0.00";
                this.document.getElementById('CR_Cas_Contract_Basic_Discount_Value').value = "0.00";
            });
</script>

<script>
    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_Renter_Id').focusout(function () {
            var id = document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value;
            var n = id.substring(0, 1);
            nbr = id.length;
            if (id == "" || id == null || id == " ") {
                document.getElementById('RenterIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 7,2,1";
                return;
            }
            if (n == 7) {
                document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').disabled = true;
                document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked = false;
                document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value = "";
            } else {
                document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').disabled = false;
            }
            if ((n != 1 && n != 2 && n != 7) || nbr != 10) {
                document.getElementById('RenterIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 7,2,1";
                //document.getElementById('Renter_code').readOnly = true;
                RAZRenterInfo();
                RazDriverInfo();
                RazAdditionalDriverInfo();
                RazContractInfo();
                RazHiddenTextBox();
            } else {
                document.getElementById('RenterIdError').innerHTML = "";
                //document.getElementById('Renter_code').readOnly = false;
                //alert();
                RAZRenterInfo();
                RazDriverInfo();
                RazAdditionalDriverInfo();
                RazContractInfo();
                RazHiddenTextBox();
            }
        })
    })

    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_Driver_Id').focusout(function () {
            if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked) {
                return;
            }
            var id = document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value;
            if (id == "" || id == null || id == " ") {
                document.getElementById('DriverIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 2,1";
                return;
            }
            var renterid = document.getElementById("CR_Cas_Contract_Basic_Renter_Id").value;

            var n = id.substring(0, 1);
            nbr = id.length;
            if ((n != 1 && n != 2) || id.length != 10) {
                document.getElementById('DriverIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 2,1";
                RazDriverInfo();
            } else if (renterid == id) {
                document.getElementById('DriverIdError').innerHTML = "عفوا رقم الهوية متكرر فالمستأجر";
            }
            else {
                document.getElementById('DriverIdError').innerHTML = "";
            }
        })
    })

    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_Additional_Driver_Id').focusout(function () {
            var id = document.getElementById('CR_Cas_Contract_Basic_Additional_Driver_Id').value;

            if (id == "" || id == null || id == " ") {
                document.getElementById('AdditionalDriverIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 2,1";
                return;
            }
            var n = id.substring(0, 1);
            var renterid = document.getElementById("CR_Cas_Contract_Basic_Renter_Id").value;
            var driverid = document.getElementById("CR_Cas_Contract_Basic_Driver_Id").value;
            var additionalDriverId = document.getElementById("CR_Cas_Contract_Basic_Additional_Driver_Id").value;
            nbr = id.length;
            if ((n != 1 && n != 2) || id.length != 10) {
                document.getElementById('AdditionalDriverIdError').innerHTML = "الحد الأدنى 10 ارقام ويبداء 2,1";
                RazDriverInfo();
            } else if (additionalDriverId == renterid) {
                document.getElementById('AdditionalDriverIdError').innerHTML = "عفوا رقم الهوية متكرر فالمستأجر";
            } else if (additionalDriverId == driverid) {
                document.getElementById('AdditionalDriverIdError').innerHTML = "عفوا رقم الهوية متكرر فالسائق";
            } else {
                document.getElementById('AdditionalDriverIdError').innerHTML = "";

            }
        })
    })

    function RAZRenterInfo() {
        document.getElementById('Renter_code').value = "";
        //document.getElementById('RenterMobile').value = "";
        document.getElementById('RenterEmail').value = "";

        document.getElementById('RenterName').value = "";
        document.getElementById('RenterEmail').value = "";
        document.getElementById('Address').value = "";
        document.getElementById('RenterReason').value = "";
        document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked = false;
        document.getElementById('RenterNationality').value = "";

        document.getElementById('RenterGender').value = "";
        document.getElementById('RenterEmployer').value = "";
        document.getElementById('RenterJob').value = "";
        document.getElementById('RenterAge').value = "";
        document.getElementById('HiddenRenterName').value = "";
        document.getElementById('HiddenRenterAddress').value = "";
        document.getElementById('RenterMobileErr').innerHTML = "";
        document.getElementById('BirthDateError').innerHTML = "";
        document.getElementById("nextBtn").disabled = false;
    }

    function RazDriverInfo() {
        //alert("Raz driver info");
        // document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value = "";
        document.getElementById('DriverBirthDate').value = "";
        document.getElementById('Driver_code').value = "";
        //document.getElementById('Driver_Mobile').value = "";
        document.getElementById('Driver_Email').value = "";
        document.getElementById('DriverName').value = "";
        document.getElementById('CR_Cas_Contract_Basic_is_Additional_Driver').checked = false;
        document.getElementById('DriverNationality').value = "";
        document.getElementById('DriverGender').value = "";
        document.getElementById('DriverJob').value = "";
        document.getElementById('CR_Mas_Renter_Information_Expiry_Driving_License_Date').value = "";
        document.getElementById('DriverEmployer').value = "";
        document.getElementById('DriverAddress').value = ""
        document.getElementById('DriverReason').value = "";
        document.getElementById('DriverAge').value = "";
    }

    function RazAdditionalDriverInfo() {
        //alert("Raz driver info");
        //document.getElementById('CR_Cas_Contract_Basic_Additional_Driver_Id').value = "";
        document.getElementById('AdditionalDriverBirthDate').value = "";
        document.getElementById('Additional_Driver_code').value = "";
        //document.getElementById('Additional_Driver_Mobile').value = "";
        document.getElementById('Additional_Driver_Email').value = "";
        document.getElementById('AdditionalDriverName').value = "";

        document.getElementById('AdditionalDriverNationality').value = "";
        document.getElementById('AdditionalDriverGender').value = "";
        document.getElementById('AdditionalDriverJob').value = "";
        document.getElementById('AdditionalDriver_Driving_License_Date').value = "";
        document.getElementById('AdditionalDriverEmployer').value = "";
        document.getElementById('AdditionalDriverAddress').value = ""
        document.getElementById('AdditionalDriverReason').value = "";
        document.getElementById('AdditionalDriverAge').value = "";
    }

    function RazContractInfo() {
        document.getElementById('CR_Cas_Contract_Basic_Expected_Rental_Days').value = "";
        document.getElementById('Price').value = "0";
        document.getElementById('ChoicesTotal').value = "0";
        document.getElementById('AdditionalTotal').value = "0";
        document.getElementById('ExAuth').checked = false;
        document.getElementById('ValueAdditionalDriver').value = "0";
        document.getElementById('CR_Cas_Contract_Basic_Expected_End_Date').value = "";
        document.getElementById('TotalContract').value = "0";
        document.getElementById('ContractDiscount').value = "0";
        document.getElementById('CR_Cas_Contract_Basic_Discount_Value').value = "0";
        document.getElementById('TotalContractHT').value = "0";
        document.getElementById('TotalContractTax').value = "0";
        document.getElementById('TotalContractPrice').value = "0"
        //document.getElementById('CR_Cas_Contract_Basic_Previous_Balance').value = "0";
        document.getElementById('TotalPayed').value = "0";
        document.getElementById('TotalToPay').value = "";
    }

    function RazHiddenTextBox() {
        document.getElementById('NationalityCode').value = "";
        document.getElementById('GenderCode').value = "";
        document.getElementById('JobsCode').value = "";
        document.getElementById('SocialCode').value = "";
        document.getElementById('EmployerCode').value = "";
        document.getElementById('RegionCode').value = "";
        document.getElementById('CityCode').value = "";
        document.getElementById('MinAge').value = "";
        document.getElementById('MaxAge').value = "";
        document.getElementById('InternalAuthValue').value = "";
        document.getElementById('ExternalAuthValue').value = "";
    }
</script>

<script>
    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_is_Renter_Driver').change(function () {
            var id = document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value;
            document.getElementById('DriverIdError').innerHTML = "";
            RazDriverInfo();
            RazAdditionalDriverInfo();
            RazContractInfo();
        })
    })
</script>

<script>
    $(document).ready(function () {
        $('#ContractDiscount').change(function () {
            var discountAuth = "@Session["ContractDiscountRate"]";
            var discountUser = document.getElementById('ContractDiscount').value;
            if (parseFloat(discountAuth) <= 0) {
                toastr.info("لا يوجد صلاحية للخصم " );
                document.getElementById('ContractDiscount').value = "0";
                document.getElementById('ContractDiscount').focus();
                return;
            }
            else if (parseFloat(discountUser) > parseFloat(discountAuth)) {
                toastr.info("قيمة الخصم  القصوى هي : " + discountAuth);
                document.getElementById('ContractDiscount').value = "0";
                document.getElementById('ContractDiscount').focus();
                return;
            }
            CalculateDiscount();
            CalculateTaxVal();
        })
    })

    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_Free_Additional_Hours').change(function () {
            var HourMax = "@Session["ContractHour"]";
            var HourUser = document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').value;

            if ( parseInt(HourMax) <= 0) {
                toastr.info("لا يوجد صلاحية للساعات الاضافية ");
                document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').value = "0";
                document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').focus();
                return;
            }

          else if (parseInt(HourUser) > parseInt(HourMax)) {
                toastr.info("عدد الساعات القصوى هي : " + HourMax);
                document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').value = "0";
                document.getElementById('CR_Cas_Contract_Basic_Free_Additional_Hours').focus();
                return;
            }

        })
    })

    $(document).ready(function () {
        $('#CR_Cas_Contract_Basic_Daily_Free_KM').change(function () {
            var KmMax = "@Session["ContractKm"]";
            var KmUser = document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').value;
            if ( parseFloat(KmMax) <= 0) {
                toastr.info("لا يوجد صلاحية للكيلوات الاضافية");
                document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').value = "0";
                document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').focus();
                return;
            }
            else if (parseFloat(KmUser) > parseFloat(KmMax)) {
                toastr.info("عدد الكيلوات القصوى هي : " + KmMax);
                document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').value = "0";
                document.getElementById('CR_Cas_Contract_Basic_Daily_Free_KM').focus();
                return;
            }
        })
    })
</script>

<script>
    function GetRenterData(k) {
        var id = $("#CR_Cas_Contract_Basic_Renter_Id").val();
        var v = $("#Renter_code").val();
        if (id == "") {
            $("#CR_Cas_Contract_Basic_Renter_Id").focus();
            return;
        }
        if ((k === 13 && v == "") || (k === 9 && v == "")) {
            toastr.warning("الرجاء التأكد من رمز الرسالة");
            return;
        }
        if ((k === 13 && v != "") || (k === 9 && v != "")) {
            document.getElementById('RenterName').value = document.getElementById('HiddenRenterName').value;
            document.getElementById('RenterEmail').value = document.getElementById('HiddenRenterEmail').value;
            document.getElementById('Address').value = document.getElementById('HiddenRenterAddress').value;
            document.getElementById("Address").style.color = document.getElementById('HiddenRenterAddress').style.color;

            var RenterName = document.getElementById('RenterName').value;
            if (RenterName == "") {
                document.getElementById('RenterIdError').innerHTML = "عفوا لم يتم العثور على الهوية";
            } else {
                document.getElementById('RenterIdError').innerHTML = "";
            }

            return true;
        }
    }
</script>

<script>
    function GetDriverData(k) {
        var id = $("#CR_Cas_Contract_Basic_Renter_Id").val();
        var v = document.getElementById('Driver_code').value;
        if (id == "") {
            $("#CR_Cas_Contract_Basic_Renter_Id").focus();
            return;
        }
        if ((k === 13 && v == "") || (k === 9 && v == "")) {
            toastr.warning("الرجاء التأكد من رمز الرسالة");
            return;
        }
        if ((k === 13 && v == "1234") || (k === 9 && v == "1234")) {
            document.getElementById('DriverName').value = document.getElementById('HiddenDriverName').value;

            document.getElementById('Driver_Email').value = document.getElementById('HiddenDriverEmail').value;


            document.getElementById('DriverAddress').value = document.getElementById('HiddenDriverAddress').value;
            document.getElementById('DriverAddress').style.color = document.getElementById('HiddenDriverAddress').style.color;


            document.getElementById('DriverJob').value = document.getElementById('HiddenDriverJob').value;


            document.getElementById('DriverEmployer').value = document.getElementById('HiddenDriverEmployer').value;
            document.getElementById('DriverEmployer').style.color = document.getElementById('HiddenDriverEmployer').style.color;


            document.getElementById('DriverNationality').value = document.getElementById('HiddenDriverNationality').value;
            document.getElementById('DriverNationality').style.color = document.getElementById('HiddenDriverNationality').style.color;


            document.getElementById('DriverGender').value = document.getElementById('HiddenDriverGender').value;
            document.getElementById('DriverGender').style.color = document.getElementById('HiddenDriverGender').style.color;


            document.getElementById('DriverIdError').value = document.getElementById('HiddenDriverIdError').value;
            document.getElementById('DrivingLicenceError').value = document.getElementById('HiddenDrivingLicenceError').value;


            document.getElementById('DriverJob').value = document.getElementById('HiddenDriverJob').value

            var DriverName = document.getElementById('DriverName').value;
            if (DriverName == "") {
                document.getElementById('DriverIdError').innerHTML = "عفوا لم يتم العثور على الهوية";
            } else {
                document.getElementById('DriverIdError').innerHTML = "";
            }
        }

    }
</script>

<script>
    function GetAdditionalDriverData(k) {
        var v = document.getElementById('Additional_Driver_code').value;
        if ((k === 13 && v == "") || (k === 9 && v == "")) {
            toastr.warning("الرجاء التأكد من رمز الرسالة");
            return;
        }
        if ((k === 13 && v == "1234") || (k === 9 && v == "1234")) {
            document.getElementById('AdditionalDriverName').value = document.getElementById('HiddenAdditionalDriverName').value;
            document.getElementById('Additional_Driver_Email').value = document.getElementById('HiddenAdditionalDriverEmail').value;


            document.getElementById('AdditionalDriverAddress').value = document.getElementById('HiddenAdditionalDriverAddress').value;
            document.getElementById('AdditionalDriverAddress').style.color = document.getElementById('HiddenAdditionalDriverAddress').style.color;


            document.getElementById('AdditionalDriverJob').value = document.getElementById('HiddenAdditionalDriverJob').value;


            document.getElementById('AdditionalDriverEmployer').value = document.getElementById('HiddenAdditionalDriverEmployer').value;
            document.getElementById('AdditionalDriverEmployer').style.color = document.getElementById('HiddenAdditionalDriverEmployer').style.color;


            document.getElementById('AdditionalDriverNationality').value = document.getElementById('HiddenAdditionalDriverNationality').value;
            document.getElementById('AdditionalDriverNationality').style.color = document.getElementById('HiddenAdditionalDriverNationality').style.color;


            document.getElementById('AdditionalDriverGender').value = document.getElementById('HiddenAdditionalDriverGender').value;
            document.getElementById('AdditionalDriverGender').style.color = document.getElementById('HiddenAdditionalDriverGender').style.color;

            var DriverName = document.getElementById('AdditionalDriverName').value;
            if (DriverName == "") {
                document.getElementById('AdditionalDriverIdError').innerHTML = "عفوا لم يتم العثور على الهوية";
            } else {
                document.getElementById('AdditionalDriverIdError').innerHTML = "";
            }

        }

    }
</script>

<script>
    $(document).ready(function () {
        $("#PayType").change(function () {
            $.get("/BasicContract/GetSalesPoint", { PayCode: $("#PayType").val() }, function (data) {
                $("#CasherName").empty();
                $.each(data, function (index, row) {
                    $("#CasherName").append("<option value= '" + row.CR_Cas_Sup_SalesPoint_Code + "'>" + row.CR_Cas_Sup_SalesPoint_Ar_Name + "</option>")
                });
            });
        })
    });
</script>

@*<script>
    $(document).ready(function () {
        $("#PayType").change(function () {
            var BtnAdd = document.getElementById('add_btn');
            BtnAdd.disabled = false;
        })
    });
</script>*@

<script>
    $(document).ready(function () {
        $("#TotalPayed").focusout(function () {
            var payed = document.getElementById('TotalPayed').value;

            if (parseFloat(payed) > 0) {
                document.getElementById('PayType').disabled = false;
                document.getElementById('PayType').selectedIndex = 0;
                document.getElementById('CasherName').disabled = false;
                document.getElementById('CasherName').selectedIndex = 0;
            } else {
                document.getElementById('PayType').disabled = true;
                document.getElementById('PayType').selectedIndex = 0;
                document.getElementById('CasherName').disabled = true;
                document.getElementById('CasherName').selectedIndex = 0;
            }
        })
    });
</script>

<script>

    var mins = 0;
    var seconds = 59;
    var timex;

    function StopTimer() {
        $('#mins').html('00:');
        $('#seconds').html('00');
        clearTimeout(timex);
        mins = 0; seconds = 59;
    }

    function startTimer() {
        timex = setTimeout(function () {
            seconds--;
            if (mins > 0) {
                $("#mins").text('0' + mins + ':');
                if (seconds <= 0) {
                    mins--; seconds = 59;
                }
                if (seconds < 10) {
                    $("#seconds").text('0' + seconds);
                } else {
                    $("#seconds").text(seconds);
                }
            } else if (mins == 0) {
                $("#mins").text('0' + mins + ':');
                if (seconds <= 0) {
                    seconds = 0;
                    CancelRenterModal();
                }
                if (seconds < 10) {
                    $("#seconds").text('0' + seconds);
                } else {
                    $("#seconds").text(seconds);
                }
            }


            startTimer();
        }, 1000);
    }

    $(function () {

        $("#SendMessage").click(
            function () {
                var RenterName = document.getElementById('RenterName').value;
                var RenterMobile = document.getElementById('RenterMobile').value;
                var RenterCode = document.getElementById('Renter_code');
                CheckRenterMobile(RenterMobile);
                var RenterMobileErr = document.getElementById('RenterMobileErr').innerHTML;
                if (RenterMobileErr != "") {
                    return;
                } else {
                    if (RenterName == "") {
                        getCustomerInfo(13);
                        setTimeout(function () {
                            // Something you want delayed.
                            var RIDERR = document.getElementById('RenterIdError').innerHTML;
                            if (RIDERR != "") {
                                return;
                            }
                            OpenRenterModal();
                            RenterCode.focus();
                        }, 1500); // How long you want the delay to be, measured in milliseconds.

                    }
                }
            }
        );
    });

    $("#RenterMobile").on("keydown", function (e) {
        //var RenterID = document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value;
        var RenterName = document.getElementById('RenterName').value;

        if (e.keyCode == 13 || e.keyCode == 9) {
            //  starttimer();
            var RenterMobile = document.getElementById('RenterMobile').value;
            CheckRenterMobile(RenterMobile);
            var RenterMobileErr = document.getElementById('RenterMobileErr').innerHTML;
            if (RenterMobileErr != "") {
                //alert("2");
                return;
            } else {
                if (RenterName == "") {
                    getCustomerInfo(e.keyCode);
                    setTimeout(function () {
                        // Something you want delayed.
                        var RIDERR = document.getElementById('RenterIdError').innerHTML;
                        if (RIDERR != "") {
                            return;
                        }
                        OpenRenterModal();
                        $("#Renter_code").focus();
                    }, 1500); // How long you want the delay to be, measured in milliseconds.

                }
            }

        }

    });

    function OpenRenterModal() {

        var RMobile = document.getElementById('RenterMobile').value;
        var Id = $('#CR_Cas_Contract_Basic_Renter_Id').val();

        if (Id == "") {
            var err = $('#RenterIdError').text("الرجاء إدخال الهوية");
            return;
        }
        if (RMobile == "") {
            $('#RenterMobileErr').text("الرجاء إدخال رقم الجوال");
            return;
        }
        startTimer();
        $("#RenterModal").modal('show');

    }

    function CloseRenterModal() {
        StopTimer();
        document.getElementById('Renter_code').value = "";
        $("#RenterModal").modal('hide');
    }

    function ValidRenterModal() {
        var id = $('#CR_Cas_Contract_Basic_Renter_Id').val();
        var v = $('#Renter_code').val();

        if (id == "") {
            $('#CR_Cas_Contract_Basic_Renter_Id').focus();
            return;
        }
        if (v == "" || v != "1234") {
            toastr.warning("الرجاء التأكد من رمز التحقق");
            return;
        }

        GetRenterData(13);
        CloseRenterModal();
    }

    function CancelRenterModal() {
        //StopTimer();
        RAZRenterInfo();
        document.getElementById('RenterMobile').value = "9665";
        document.getElementById('CR_Cas_Contract_Basic_Renter_Id').value = "";
        document.getElementById('RenterIdError').innerHTML = "";
        CloseRenterModal();
    }

    $("#Renter_code").on("keydown", function (e) {
        if (e.keyCode == 13) {
            var v = document.getElementById('Renter_code').value;

            if (v == "" || v != "1234") {
                toastr.warning("الرجاء التأكد من رمز الرسالة");
                return;
            }
            GetRenterData(13);
            CloseRenterModal();
        }

    });
</script>

<script>
    var Drivermins = 0;
    var Driverseconds = 59;
    var Drivertimex;

    function StopTimerDriver() {
        $('#Drivermins').html('00:');
        $('#Driverseconds').html('00');
        clearTimeout(Drivertimex);
        Drivermins = 0; Driverseconds = 59;
    }

    function startTimerDriver() {
        Drivertimex = setTimeout(function () {
            Driverseconds--;
            if (Drivermins > 0) {
                $("#Drivermins").text('0' + Drivermins + ':');
                if (Driverseconds <= 0) {
                    Drivermins--; Driverseconds = 59;
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });
                }
                if (Driverseconds < 10) {
                    $("#Driverseconds").text('0' + Driverseconds)
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });;
                } else {
                    $("#Driverseconds").text(Driverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });
                }
            }
            else if (Drivermins == 0) {
                $(document).ready(function () {
                    window.setTimeout(() => $('#Driver_code').focus(), 0);
                });
                $("#Drivermins").text('0' + Drivermins + ':');
                if (Driverseconds <= 0) {
                    Driverseconds = 0;
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });
                    CancelDriverModal();
                }
                if (Driverseconds < 10) {
                    $("#Driverseconds").text('0' + Driverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });
                }
                else {
                    $("#Driverseconds").text(Driverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Driver_code').focus(), 0);
                    });
                }
            }


            startTimerDriver();
        }, 1000);
    }

    $(function () {
        $("#SendMessageDriver").click(
            function () {
                //var Drivercode = document.getElementById('Driver_code');
                var DriverName = document.getElementById('DriverName').value;
                var DriverMobile = document.getElementById('Driver_Mobile').value;
                var MobileErr = document.getElementById('DriverMobileErr').innerHTML;

                CheckDriverMobile(DriverMobile);
                if (MobileErr != "") {
                    return;
                }
                //if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked) {
                //    return;
                //}

                else {
                    if (DriverName == "") {
                        getDriverInfo(13);
                        setTimeout(function () {
                            var Driver = document.getElementById('DriverIdError').innerHTML;
                            if (Driver != "") {
                                return;
                            }
                            OpenDriverModal();
                            $('Driver_code').focus();
                        }, 1500);
                    }
                }
            }
        );
    });

    function OpenDriverModal() {
        var RMobile = document.getElementById('Driver_Mobile').value;
        var Id = $('#CR_Cas_Contract_Basic_Driver_Id').val();

        if (Id == "") {
            document.getElementById('DriverIdError').innerHTML = "الرجاء إدخال الهوية";
            return;
        }
        if (RMobile == "" && RMobile.length < 12) {
            document.getElementById('DriverMobileErr').innerHTML = "الرجاء التأمد من رقم الجوال";
            return;
        }
        startTimerDriver();
        $("#DriverModal").modal('show');
    }

    function CloseDriverModal() {
        StopTimerDriver();
        $("#DriverModal").modal('hide');
    }

    function ValidDriverModal() {
        var id = $('#CR_Cas_Contract_Basic_Renter_Id').val();
        var v = document.getElementById('Driver_code').value;

        if (id == "") {
            $('#CR_Cas_Contract_Basic_Renter_Id').focus();
            return;
        }
        if (v == "" || v != "1234") {
            toastr.warning("الرجاء التأكد من رمز التحقق");
            return;
        } else {
            GetDriverData(13);
            CloseDriverModal();
        }
    }

    function CancelDriverModal() {
        RazDriverInfo();
        document.getElementById('Driver_Mobile').value = "9665";
        document.getElementById('CR_Cas_Contract_Basic_Driver_Id').value = "";
        document.getElementById('DriverIdError').innerHTML = "";
        CloseDriverModal();
    }

    $("#Driver_Mobile").on("keydown", function (e) {
        if (document.getElementById('CR_Cas_Contract_Basic_is_Renter_Driver').checked) {
            return;
        }
        var DriverMobile = document.getElementById('Driver_Mobile').value;
        CheckDriverMobile(DriverMobile);
        var MobileErr = document.getElementById('DriverMobileErr').innerHTML;
        if (MobileErr != "") {
            return;
        }

        if (e.keyCode == 13 || e.keyCode == 9) {
            //document.getElementById('Driver_code').focus();
            //var focused = document.activeElement;
            //alert(focused.id);
            var DriverName = document.getElementById('DriverName').value;
            if (DriverName == "") {
                getDriverInfo(event.keyCode);
                OpenDriverModal();
            }
        }
    });

    $("#Driver_code").on("keydown", function (e) {
        if (e.keyCode == 13) {
            ValidDriverModal();
        }
    });
</script>

<script>

    var AddDrivermins = 0;
    var AddDriverseconds = 59;
    var AddDrivertimex;

    function StopTimerAddDriver() {
        $('#AddDrivermins').html('00:');
        $('#AddDriverseconds').html('00');
        clearTimeout(AddDrivertimex);
        AddDrivermins = 0;
        AddDriverseconds = 59;
    }

    function startTimerAddDriver() {
        AddDrivertimex = setTimeout(function () {
            AddDriverseconds--;
            if (AddDrivermins > 0) {
                $("#AddDrivermins").text('0' + AddDrivermins + ':');
                if (AddDriverseconds <= 0) {
                    AddDrivermins--; AddDriverseconds = 59;
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });
                }
                if (AddDriverseconds < 10) {
                    $("#AddDriverseconds").text('0' + AddDriverseconds)
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });;
                } else {
                    $("#AddDriverseconds").text(AddDriverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });
                }
            }
            else if (AddDrivermins == 0) {
                $(document).ready(function () {
                    window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                });
                $("#AddDrivermins").text('0' + AddDrivermins + ':');
                if (AddDriverseconds <= 0) {
                    AddDriverseconds = 0;
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });
                    CancelAddDriverModal();
                }
                if (AddDriverseconds < 10) {
                    $("#AddDriverseconds").text('0' + AddDriverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });
                }
                else {
                    $("#AddDriverseconds").text(AddDriverseconds);
                    $(document).ready(function () {
                        window.setTimeout(() => $('#Additional_Driver_code').focus(), 0);
                    });
                }
            }
            startTimerAddDriver();
        }, 1000);
    }

    $(function () {
        $("#SendMessageAdditionalDriver").click(
            function () {
                var AdditionalDriverName = document.getElementById('AdditionalDriverName').value;
                var AddDriverMobile = document.getElementById('Additional_Driver_Mobile').value;
                var MobileErr = document.getElementById('AdditionalDriverMobileErr').innerHTML;

                //CheckAddDriverMobile(AddDriverMobile);
                if (MobileErr != "") {
                    return;
                }
                else {
                    if (AdditionalDriverName == "") {
                        getAdditionalDriverInfo(13);
                        setTimeout(function () {
                            var Driver = document.getElementById('DriverIdError').innerHTML;
                            if (Driver != "") {
                                return;
                            }
                            OpenAddDriverModal();
                            $('Additional_Driver_code').focus();
                        }, 1500);
                    }
                }
            }
        );
    });

    function OpenAddDriverModal() {
        var Mobile = document.getElementById('Additional_Driver_Mobile').value;
        var Id = document.getElementById('CR_Cas_Contract_Basic_Additional_Driver_Id').value;

        if (Id == "") {
            document.getElementById('AdditionalDriverIdError').innerHTML = "الرجاء إدخال الهوية";
            return;
        }

        if (Mobile == "") {
            document.getElementById('AdditionalDriverMobileErr').innerHTML = "الرجاء إدخال رقم الجوال";
            return;
        }
        startTimerAddDriver();
        $("#AddDriverModal").modal('show');

    }

    function CloseAddDriverModal() {
        StopTimerAddDriver();
        $("#AddDriverModal").modal('hide');
    }

    function ValidAddDriverModal() {
        var id = $('#CR_Cas_Contract_Basic_Driver_Id').val();
        var v = document.getElementById('Additional_Driver_code').value;
        if (id == "") {
            $('#CR_Cas_Contract_Basic_Driver_Id').focus();
            return;
        }
        if (v == "" || v != "1234") {
            toastr.warning("الرجاء التأكد من رمز التحقق");
            return;
        } else {
            GetAdditionalDriverData(13);
            //document.getElementById('Additional_Driver_code').value = "";
            CloseAddDriverModal();
        }
    }

    function CancelAddDriverModal() {
        RazAdditionalDriverInfo();
        document.getElementById('Additional_Driver_Mobile').value = "9665";
        document.getElementById('CR_Cas_Contract_Basic_Additional_Driver_Id').value = "";
        document.getElementById('AdditionalDriverIdError').innerHTML = "";
        CloseAddDriverModal();
    }

    $("#Additional_Driver_Mobile").on("keydown", function (e) {
        var AddDriverMobile = document.getElementById('Additional_Driver_Mobile').value;
        var MobileErr = document.getElementById('AdditionalDriverMobileErr').innerHTML;
        if (MobileErr != "") {
            return;
        }

        if (e.keyCode == 13 || e.keyCode == 9) {
            var AdditionalDriverName = document.getElementById('AdditionalDriverName').value;
            if (AdditionalDriverName == "") {
                getAdditionalDriverInfo(event.keyCode);
                OpenAddDriverModal();
            }

        }

    });

    $("#Additional_Driver_code").on("keydown", function (e) {
        if (e.keyCode == 13) {
            ValidAddDriverModal();
        }
    });

</script>

<script>

    var Authmins = 0;
    var Authseconds = 59;
    var Authtimex;


    function StopTimerAuth() {
        clearTimeout(Authtimex);
        Authmins = 1; Authseconds = 0;
        //$('#mins').html('00:');
        //$('#seconds').html('00');
    }

    function startTimerAuth() {
        Authtimex = setTimeout(function () {
            Authseconds--;
            if (Authmins > 0) {
                $("#Authmins").text('0' + Authmins + ':');
                if (Authseconds <= 0) {
                    Authmins--; Authseconds = 59;
                }
                if (Authseconds < 10) {
                    $("#Authseconds").text('0' + Authseconds);
                } else {
                    $("#Authseconds").text(Authseconds);
                }
            } else if (Authmins == 0) {
                $("#Authmins").text('0' + Authmins + ':');
                if (Authseconds <= 0) {
                    Authseconds = 0;
                    CancelModalAuth();
                }
                if (Authseconds < 10) {
                    $("#Authseconds").text('0' + Authseconds);
                } else {
                    $("#Authseconds").text(Authseconds);
                }
            }


            startTimerAuth();
        }, 1000);
    }


    $(function () {
        $("#AuthBtn2").click(
            function () {
                OpenModalAuth();
            }
        );
    });
    //////////////////Authority Modal/////////////////
    function OpenModalAuth() {
        startTimerAuth();
        $("#AuthModal").modal('show');
    }

    function CloseModalAuth() {
        StopTimerAuth();
        $("#AuthModal").modal('hide');
    }

    function ValidModalAuth() {
        var v = document.getElementById('AuthNo').value;
        if (v == "" || v != "999999") {
            toastr.warning("الرجاء التأكد من رمز التحقق");
            return;
        } else {
            Auth = true;
            CloseModalAuth();
        }
    }
    function CancelModalAuth() {
        Auth = false;
        CloseModalAuth();
    }
</script>


<script>
    $(document).ready(function () {
        $('#ContractForm').submit(function (e) {
            var fieldVal = $('#CR_Cas_Contract_Basic_Expected_Rental_Days').val();
            var TotalPayed = $('#TotalPayed').val();
            var PayType = $('#PayType').val();

            if (!fieldVal || fieldVal === '0') {
                toastr.info('الرجاء ادخال عدد ايام');// show an alert message
                e.preventDefault(); // prevent the form from submitting normally
            }
            else if (TotalPayed > 0) {
                if (PayType === "") {
                    toastr.info("يرجي ادخال طريقة الدفع......");
                    e.preventDefault();
                }
                else {
                    document.getElementById("add_btn").disabled = true;
                    $("#loader").removeAttr("hidden");
                    toastr.options.setTimeout = 99999;
                    toastr.success("جــاري حفظ بيانات العقــد وارســالـه للمستــاجــر ......")
                }
            }
            else {
                document.getElementById("add_btn").disabled = true;
                $("#loader").removeAttr("hidden");
                toastr.options.setTimeout = 99999;
                toastr.success("جــاري حفظ بيانات العقــد وارســالـه للمستــاجــر ......")
            }
        });
    });
</script>

<script>
    //$(document).ready(function () {
    //    $("#AuthNoBtn").click(function (e) {
    //        if ($("#TotalPayed").val() > 0) {
    //            if ($("#PayType").val() === "") {
    //                toastr.info("يرجي ادخال طريقة الدفع......");
    //                e.preventDefault();
    //            }
    //        }
    //    })
    //});
</script>
