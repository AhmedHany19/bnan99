@model IEnumerable<RentCar.Models.CR_Cas_Contract_Basic>

<div class="table-rep-plugin" id="TableDiv">
    <table id="myTable" class="table table-striped mb-0" style="cursor:pointer">
        <thead style="overflow-y: scroll; flex-grow: 1;">
            <tr>
                <th style="width:20%">
                    رقم العقد
                </th>
                <th style="width:10%">
                    تاريخه
                </th>

                <th style="width:24%">
                    المستأجر
                </th>
                <th style="width:37%">
                    السيارة
                </th>

                <th style="width:6%">
                    الحالة
                </th>

                <th style="width:11%">
                    إنشاء العقد
                </th>
          

            </tr>
        </thead>
        <tbody id="tbl">

            @foreach (var item in Model)
            {
                int copyNumber = item.CR_Cas_Contract_Basic_Copy;
                if (item.CR_Cas_Contract_Basic_Status == "E")
                {
                    <tr>
                        <td style="width:20%;color:red">
                            @Html.DisplayFor(modelItem => item.CR_Cas_Contract_Basic_No)
                            @{

                                copyNumber = copyNumber - 1;
                                if (copyNumber > 0)
                                {
                                    <label style="float:left;color:red;">(@copyNumber)</label>
                                }

                            }
                        </td>
                        <td style="width: 10%; color: red">
                            @if (item.CR_Cas_Contract_Basic_Date != null)
                            {
                                @item.CR_Cas_Contract_Basic_Date.Value.ToString("yyyy/MM/dd")
                            }


                        </td>

                        <td style="width: 24%; color: red">

                            @Html.DisplayFor(modelItem => item.CR_Mas_Renter_Information.CR_Mas_Renter_Information_Ar_Name)

                        </td>
                        <td style="width: 37%; color: red">

                            @Html.DisplayFor(modelItem => item.CR_Cas_Sup_Car_Information.CR_Cas_Sup_Car_Collect_Ar_Name)

                        </td>

                        <td style="width: 6%; color: red" align="center">
                            @if (item.CR_Cas_Contract_Basic_Status == "A")
                            {
                                <label>نشط</label>
                            }
                            @if (item.CR_Cas_Contract_Basic_Status == "U")
                            {
                                <label>لم يكتمل</label>
                            }
                            @if (item.CR_Cas_Contract_Basic_Status == "y")
                            {
                                <label>ممدد</label>
                            }
                            else if (item.CR_Cas_Contract_Basic_Status == "C")
                            {
                                <label>مغلق</label>
                            }
                            else if (item.CR_Cas_Contract_Basic_Status == "E")
                            {
                                <label>منتهي</label>
                            }

                        </td>

                        <td align="center" style="width: 11%; color: red">
                            <a href="~/BasicContract/PDFFlyer/?p=@Html.DisplayFor(modelItem => item.CR_Cas_Contract_Basic_CreateContract_Pdf)" target="_blank">
                                <i class="fas fa-file-pdf" style="color:red;"></i>

                            </a>
                        </td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td style="width:20%">
                            @Html.DisplayFor(modelItem => item.CR_Cas_Contract_Basic_No)
                            @{

                                copyNumber = copyNumber - 1;
                                if (copyNumber > 0)
                                {
                                    <label style="float:left;color:red;">(@copyNumber)</label>
                                }

                            }
                        </td>
                        <td style="width:10%">
                            @if (item.CR_Cas_Contract_Basic_Date != null)
                            {
                                @item.CR_Cas_Contract_Basic_Date.Value.ToString("yyyy/MM/dd")
                            }


                        </td>
                        
                        <td style="width:24%">

                            @Html.DisplayFor(modelItem => item.CR_Mas_Renter_Information.CR_Mas_Renter_Information_Ar_Name)

                        </td>
                        <td style="width:37%">

                            @Html.DisplayFor(modelItem => item.CR_Cas_Sup_Car_Information.CR_Cas_Sup_Car_Collect_Ar_Name)

                        </td>

                        <td style="width:6%" align="center">
                            @if (item.CR_Cas_Contract_Basic_Status == "A")
                            {
                                <label>نشط</label>
                            }
                            @if (item.CR_Cas_Contract_Basic_Status == "U")
                            {
                                <label>لم يكتمل</label>
                            }
                            @if (item.CR_Cas_Contract_Basic_Status == "y")
                            {
                                <label>ممدد</label>
                            }
                            else if (item.CR_Cas_Contract_Basic_Status == "C")
                            {
                                <label>مغلق</label>
                            }
                            else if (item.CR_Cas_Contract_Basic_Status == "E")
                            {
                                <label>منتهي</label>
                            }

                        </td>

                       
                        <td align="center" style="width:11%">
                            <a href="~/BasicContract/PDFFlyer/?p=@Html.DisplayFor(modelItem => item.CR_Cas_Contract_Basic_CreateContract_Pdf)" target="_blank">
                                <i class="fas fa-file-pdf" style="color:red;"></i>

                            </a>
                        </td>
                       
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
