
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutSys3.cshtml";
}

<link href="~/BSys3Styles/CSS/style_form.css" rel="stylesheet" />

<style>
    .form-control {
        width: auto
    }
</style>
<div class="content">
    <!-- Start Content-->
    <div class="container">

        <div class="row">
            <div class="col-12">
                <div class="card-box table-responsive">
                    <div class="title_corp"><h3> تسليم عهدة</h3></div>
                    <div class="subtitle_corp">تمكن هذه الصفحة المستخدم من تسليم العهدة للإدارة المالية</div>
                    <div class="hr_60"></div>
                    <div class="hr_80"></div>
                    <div class="corp_page">
                        <div class="page_content" style="float:left;width:100%">
                            <form id="form_validation" action="/CashClosing/Create" enctype="multipart/form-data" method="post" data-parsley-validate novalidate>

                                @Html.AntiForgeryToken()

                                <div class="form-horizontal" style="margin-top:15px;min-height:50%">

                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                    <div style=" margin-right: 30px;">
                                        <div class="row mt-3 mb-2">
                                            <div class="col-md-6">
                                                <div class="row">

                                                    <div>
                                                        <label class="label_form" style="float:right;">رقم تسليم العهدة</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" class="form-control" name="TracingNo" value="@ViewBag.ProcNo" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div>

                                                        <label class="label_form" style="float:right;">تاريخ التسليم</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input class="form-control text-box single-line" data-val="true" data-inputmask="'alias': 'yyyy/mm/dd'" data-val-date="The field CR_Cas_Sup_Branch_Documentation_Date must be a date."
                                                               id="Date" name="Date" type="text" value="@ViewBag.Date" readonly>
                                                    </div>
                                                </div>

                                            </div>
                                            
                                        </div>

                                        <div class="row" hidden>
                                            <div class="col-lg-4 col-md-12 " style="margin-top:0px;">
                                                <div class="row">
                                                    <div class="col-md-4 label4">
                                                        <label>من تاريخ</label>
                                                    </div>
                                                    <div class="col-md-6 input4">
                                                        <input class="form-control text-box single-line" data-val="true" data-val-date="The field sd must be a date."
                                                               id="sd" name="sd" type="date" value="@ViewBag.sd">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-12 " style="margin-top:0px;">
                                                <div class="row">
                                                    <div class="col-md-6 label4">
                                                        <label>الى تاريخ</label>
                                                    </div>
                                                    <div class="col-md-6 input4">
                                                        <input class="form-control text-box single-line" data-val="true" data-val-date="The field ed must be a date."
                                                               id="ed" name="ed" type="date" value="@ViewBag.ed">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row mb-2">
                                            <div class="col-md-6 offset-md-12 " style="">
                                                <div class="row">
                                                    <div>
                                                        <label class="control-label">نقطة البيع</label>
                                                    </div>
                                                    <div style="font-family: Arial !important; margin-right: 25px; width: 215px; height: 19px;">
                                                        @Html.DropDownList("CR_Cas_Sup_SalesPoint_Code", null, "", htmlAttributes: new { @class = "form-control", onchange = "GetReceipt()", style = "width:215px" })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div>
                                                        <label class="control-label"> رصيد نقطه البيع</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" id="TotalVal1" name="TotalVal1" class="form-control text-box single-line t2" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-9 offset-md-12 " style="" hidden>
                                                <div class="row">
                                                    <div>
                                                        <label class="control-label">المبلغ المسلم</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" id="TotalVal" name="TotalVal" class="form-control text-box single-line" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="row mt-2">
                                                    <div>
                                                        <label class="control-label "> مجموع الدائن</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" class="form-control text-box single-line totalCreditor"  readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4 offset-md-12" >
                                                <div class="row">
                                                    <div>
                                                        <label class="control-label"> مجموع المدين</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" class="form-control text-box single-line totaldebtor" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12 offset-md-12 mb-2">
                                                <div class="row">
                                                    <div>
                                                        <label class="control-label mt-3"> الملاحظات</label>
                                                    </div>
                                                    <div style=" margin-right: 20px;">
                                                        <input type="text" id="" name="reason" class="form-control text-box single-line mt-3" style="width: 200%" />
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <div id="Table">
                                        @{
                                            Html.RenderAction("PartialView");
                                        }
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 col-50" style="margin-top:30px;">
                                            <div></div>
                                            <input type="submit" name="add" class="btn btn-primary waves-effect" id="add_btn" value="حفظ" />
                                        </div>
                                        <div class="col-md-6 col-50" style="margin-top:30px;">
                                            <div></div>
                                            <a href="/BranchHome/BranchStat/" tabindex="" class="btn btn-primary waves-effect" style="float:left">انهاء</a>
                                        </div>

                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<script type="text/javascript">
        window.addEventListener("load", function () {

            if ('@TempData["TempModel"]' =="Added") {
                toastr.success("تم الحفظ بنجاح");
            }

        });

    function GetReceipt() {


        $('.totalCreditor').val("0.00");
        $('.totaldebtor').val("0.00");
        document.getElementById('TotalVal').value = "0.00";
        $.ajax({
            url: '@Url.Action("PartialView","CashClosing")',
            type: "GET",
            data: { SalesPointCode: document.getElementById('CR_Cas_Sup_SalesPoint_Code').value },
            success: function (result) {
                //alert();
                $('#Table').html(result);
               
            }
        });

        };
</script>

<style>
    .row {
        align-items: center !important;
    }
</style>









